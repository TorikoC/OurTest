(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["card"],{"2ee8":function(t,a,e){},5061:function(t,a,e){"use strict";var s=e("2ee8"),i=e.n(s);i.a},7163:function(t,a,e){"use strict";var s=e("ed88"),i=e.n(s);i.a},c752:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"flex-row"},[t.isAuthor?e("sidebar",{attrs:{tabs:t.tabs,active:t.active},on:{click:t.toClickTab}}):t._e(),e("div",{staticClass:"flex-1"},[0===t.active?e("general",{attrs:{data:t.data,flag:t.comment.flag},on:{comment:t.toComment,vote:t.toVote}}):1===t.active?e("cards",{attrs:{data:t.data.cards}}):2===t.active?e("settings",{attrs:{data:t.data.settings},on:{del:t.toDel,update:t.toUpdate}}):t._e()],1)],1)},i=[],n=(e("a481"),e("ac6a"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-group pd-1 flex-column"},[e("div",{staticClass:"flex-row"},[e("h1",[t._v(t._s(t.data.title))]),e("button",{staticClass:"\n      pure-button pure-button-primary ml-auto\n      flex-item-center\n      "},[e("a",{attrs:{href:"/practising/"+t.data.title,target:"_blank"}},[t._v("\n        开始练习\n      ")])])]),e("div",{staticClass:"flex-row"},[e("img",{staticStyle:{"object-fit":"cover"},attrs:{src:"/logo.png",alt:"cover",width:"200px",height:"200px"}}),e("ul",{staticClass:"ml-1 flex-1 meta-list"},[e("li",{staticClass:"meta-list-item"},[e("span",{staticClass:"meta-key"},[t._v("作者")]),e("span",{staticClass:"meta-value"},[t._v(t._s(t.data.author?t.data.author:""))])]),e("li",{staticClass:"meta-list-item"},[e("span",{staticClass:"meta-key"},[t._v("發佈日期")]),e("span",{staticClass:"meta-value"},[t._v(t._s(t._f("formatDateTime")(t.data.createdAt?t.data.createdAt:0)))])]),e("li",{staticClass:"meta-list-item"},[e("span",{staticClass:"meta-key"},[t._v("目錄")]),e("span",{staticClass:"meta-value"},[t._v("\n          "+t._s(t.data.category?t.data.category.toString():"")+"\n        ")])]),e("li",{staticClass:"meta-list-item"},[e("span",{staticClass:"meta-key"},[t._v("评价")]),e("star",{staticClass:"meta-value",attrs:{disable:!!t.data.vote&&t.data.vote.disable,count:6-(t.data.vote?t.data.vote.count:0)},on:{click:t.toVote}})],1),e("li",{staticClass:"meta-list-item"},[e("span",{staticClass:"meta-key"},[t._v("標簽")]),t._l(t.data.tags,function(t){return e("tag",{key:t,staticClass:"meta-value",attrs:{text:t}})})],2),e("li",{staticClass:"meta-list-item"},[e("span",{staticClass:"meta-key"},[t._v("卡片數量")]),e("span",{staticClass:"meta-value"},[t._v(t._s(t.data.cards?t.data.cards.length:0))])])]),e("rating",{attrs:{data:t.data.rating}})],1),e("div",{staticClass:"mt-1"},[t._v("\n    "+t._s(t.data.intro?t.data.intro:"")+"\n  ")]),e("ot-comment",{staticClass:"mt-1",attrs:{data:t.data.comments?t.data.comments:[],flag:t.commentFlag},on:{submit:t.toComment}})],1)}),c=[],o=(e("cadf"),e("551c"),e("097d"),{props:{data:{type:Object,required:!0},commentFlag:{type:Boolean,default:!1}},methods:{toComment:function(t){this.$emit("comment",t)},toVote:function(t){this.$emit("vote",t)}}}),l=o,r=(e("7163"),e("2877")),u=Object(r["a"])(l,n,c,!1,null,"929b85cc",null);u.options.__file="general.vue";var d=u.exports,m=function(){var t=this,a=t.$createElement;t._self._c;return t._m(0)},v=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("h1",{staticClass:"text-center"},[t._v("Developing")])])}],p={},f=p,h=(e("5061"),Object(r["a"])(f,m,v,!1,null,null,null));h.options.__file="cards.vue";var g=h.exports,_=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("form",{staticClass:"pd-1 h-100 flex-column pure-form pure-form-stacked w-50"},[e("span",[t._v("访问限制")]),e("label",{attrs:{for:"public"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.accessbility,expression:"settings.accessbility"}],attrs:{type:"radio",name:"public",id:"public"},domProps:{value:0,checked:t._q(t.settings.accessbility,0)},on:{change:function(a){t.$set(t.settings,"accessbility",0)}}}),t._v("\n    公开\n  ")]),e("label",{attrs:{for:"private"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.accessbility,expression:"settings.accessbility"}],attrs:{type:"radio",name:"private",id:"private"},domProps:{value:1,checked:t._q(t.settings.accessbility,1)},on:{change:function(a){t.$set(t.settings,"accessbility",1)}}}),t._v("\n    隐藏\n  ")]),e("div",{staticClass:"mt-auto flex-row"},[e("button",{staticClass:"ml-auto pure-button pure-button-primary",on:{click:function(a){return a.preventDefault(),t.toSave(a)}}},[t._v("保存")]),e("button",{staticClass:"ml-1 pure-button button-error",on:{click:function(a){return a.preventDefault(),t.toDel(a)}}},[t._v("删除")])])])},b=[],C={props:{data:{type:Object,required:!0}},data:function(){return{settings:this.deepCopy(this.data)}},methods:{toSave:function(){this.$emit("update",this.settings)},toDel:function(){this.$emit("del")}}},y=C,$=Object(r["a"])(y,_,b,!1,null,null,null);$.options.__file="settings.vue";var x=$.exports,k={components:{General:d,Cards:g,Settings:x},props:{title:{type:String,required:!0}},data:function(){return{loading:!0,data:{},active:-1,tabs:[{name:"基础信息",component:"general"},{name:"卡片",component:"cards"},{name:"设置",component:"settings"}],isAuthor:!1,comment:{flag:!1},settings:{flag:!1}}},mounted:function(){var t=this;this.$axios.get("".concat(this.$url.cards,"/").concat(this.title)).then(function(a){t.data=a.data,t.data.stars.forEach(function(a){a.username===window.$user.username&&(t.data.vote.disable=!0,t.data.vote.count=a.count)}),a.data.isAuthor&&(t.isAuthor=!0),t.active=0,t.loading=!1})},methods:{toClickTab:function(t){this.active=t},toComment:function(t){var a=this;this.comment.flag||(this.comment.flag=!0,t.title=this.title,this.$axios.post("".concat(this.$url.cards,"/").concat(this.title,"/comments"),t).then(function(t){a.data.comments.push(t.data),a.comment.flag=!1}).catch(function(){a.comment.flag=!1}))},toVote:function(t){window.$user?(this.data.vote.disable=!0,this.data.vote.count=t,this.$axios.put("".concat(this.$url.cards,"/").concat(this.data.title,"/stars"),{count:t}).then(function(t){})):this.$alert("error","請先登錄")},toUpdate:function(t){var a=this;this.settings.flag||this.$axios.put("".concat(this.$url.cards,"/").concat(this.title,"/settings"),{settings:t}).then(function(t){a.$alert("success","更新成功"),a.settings.flag=!1})},toDel:function(){var t=this;this.$axios.delete("".concat(this.$url.cards,"/").concat(this.title)).then(function(a){a.data.ok&&(t.$alert("success","删除成功!"),setTimeout(function(){t.$router.replace("/")},300))})}}},w=k,D=Object(r["a"])(w,s,i,!1,null,null,null);D.options.__file="index.vue";a["default"]=D.exports},ed88:function(t,a,e){}}]);
//# sourceMappingURL=card.690507b5.js.map