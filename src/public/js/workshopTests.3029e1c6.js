(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["workshopTests"],{"0195":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-row"},[s("sidebar",{attrs:{tabs:t.tabs,status:t.status,active:t.active},on:{click:t.toClickTab}}),s(t.tabs[t.active].component,{tag:"component",staticClass:"flex-1",on:{next:t.jumpTo}})],1)},n=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-row pd-1"},[s("form",{staticClass:"flex-column w-50 pure-form pure-form-stacked",on:{submit:function(e){return e.preventDefault(),t.submit(e)},click:t.toClick}},[s("label",{attrs:{for:"Title"}},[t._v("标题")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.generals.title,expression:"generals.title"}],attrs:{type:"text",id:"title",name:"title",required:""},domProps:{value:t.generals.title},on:{input:function(e){e.target.composing||t.$set(t.generals,"title",e.target.value)}}}),s("label",{attrs:{for:"tree-input"}},[t._v("分类")]),s("tree-input",{attrs:{show:t.show,data:t.data,"default-value":t.generals.category},on:{focus:function(e){t.show=!0},change:t.toChange}}),s("label",{attrs:{for:"tags"}},[t._v("标签")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.generals.tags,expression:"generals.tags"}],attrs:{type:"text",id:"tags",name:"tags"},domProps:{value:t.generals.tags},on:{input:function(e){e.target.composing||t.$set(t.generals,"tags",e.target.value)}}}),s("span",{staticClass:"pure-form-message"},[t._v("用逗号','分隔")]),s("span",{staticClass:"pure-form-message"},[t._v("例子: 英语,托福")]),s("div",{staticClass:"flex-row flex-wrap"},t._l(t.tags,function(t){return s("tag",{key:t,staticClass:"mr-1 mb-1",attrs:{text:t}})})),s("label",{attrs:{for:"intro"}},[t._v("介绍")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.generals.intro,expression:"generals.intro"}],attrs:{name:"intro",id:"intro",cols:"60",rows:"10",required:"",minlength:"10"},domProps:{value:t.generals.intro},on:{input:function(e){e.target.composing||t.$set(t.generals,"intro",e.target.value)}}}),s("span",{staticClass:"pure-form-message"},[t._v("\n      介绍该测试, 不少于10个字符\n    ")]),s("button",{staticClass:"ml-auto mt-auto pure-button pure-button-primary",attrs:{type:"submit"}},[t._v("\n      保存 & 下一步\n    ")])],1)])},a=[],r=(s("28a5"),{data:function(){return{generals:{title:"",intro:"",tags:"",category:""},prev:"",show:!1,data:[]}},computed:{tags:function(){var t=this.generals.tags,e=this.prev;return!e&&t?t.split(",").filter(function(t){return""!==t.trim()}):t&&","===t[t.length-1]?t.split(",").filter(function(t){return""!==t.trim()}):t&&e.length>t.length&&-1!==e.substr(t.length-1).indexOf(",")?t.split(",").filter(function(t){return""!==t.trim()}):t&&e&&e.split(",")!==t.split(",")?t.split(",").filter(function(t){return""!==t.trim()}):[]}},mounted:function(){var t=this,e=JSON.parse(localStorage.getItem("tests-generals"));e&&(this.generals=e),this.$axios.get(this.$url.category).then(function(e){t.data=e.data}).catch(function(e){t.$alert("error",e.message)})},methods:{toChange:function(t){this.show=!1,this.generals.category=t},toClick:function(t){var e=document.getElementById("tree-input-popout");if(e){var s=e.getBoundingClientRect(),i=document.getElementById("tree-input"),n=i.getBoundingClientRect(),o=t.clientX,a=t.clientY;(o<s.left||o>s.right||a<s.top||a>s.bottom)&&(o<n.left||o>n.right||a<n.top||a>n.bottom)&&(this.show=!1)}},submit:function(){localStorage.setItem("tests-generals",JSON.stringify(this.generals)),this.$emit("next",1)}}}),l=r,c=s("2877"),u=Object(c["a"])(l,o,a,!1,null,null,null);u.options.__file="generals.vue";var d=u.exports,p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-row pd-1"},[s("form",{staticClass:"w-50 pure-form pure-form-stacked flex-column"},[s("label",{attrs:{for:"type"}},[t._v("问题类型")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],attrs:{name:"type",id:"type",disabled:t.editing},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.type=e.target.multiple?s:s[0]}}},t._l(t.types,function(e){return s("option",{key:e.name,domProps:{value:e.component}},[t._v("\n        "+t._s(e.name)+"\n      ")])})),s("label",{attrs:{for:"score"}},[t._v("分数 ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.score,expression:"score"}],attrs:{type:"Number",min:"0",id:"score",name:"score",placeholder:"0"},domProps:{value:t.score},on:{input:function(e){e.target.composing||(t.score=e.target.value)}}}),s(t.type,{tag:"component",staticClass:"flex-1",on:{complete:t.toComplete,update:t.toUpdate,cancel:t.toCancel}}),s("div",{staticClass:"ml-auto mt-1 flex-row"},[s("button",{staticClass:"pure-button",on:{click:function(e){e.preventDefault(),t.next(-1)}}},[t._v(" 上一步 ")]),s("button",{staticClass:"pure-button pure-button-primary ml-1",on:{click:function(e){e.preventDefault(),t.next(1)}}},[t._v(" 保存 & 下一步 ")])])],1),s("div",{staticClass:"ml-1 pd-1 bd-1 shadow-1 overflow-y flex-1 relative",staticStyle:{height:"80vh"}},[s("p",{staticClass:"text-light"},[t._v("问题")]),s("ul",t._l(t.questions,function(e,i){return s("li",{key:e.desc,staticClass:"mb-1"},[s("question-item",{attrs:{index:i+1,data:e},on:{del:function(e){t.del(e,i)},edit:function(e){t.edit(e,i)}}})],1)}))])])},m=[],f=(s("f751"),s("cadf"),s("551c"),s("097d"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"question-container mt-1 flex-row"},[s("div",{staticClass:"flex-1"},[s("div",{staticClass:"desc"},[t._v("\n      #"+t._s(t.index)+". \n      "),s("br"),t._v("\n      "+t._s(t.data.desc)+"\n    ")]),s("span",{staticClass:"question-score",attrs:{title:"score"}},[t._v("\n      "+t._s(t.data.score||0)+"分\n    ")]),s("br"),s("span",{staticClass:"question-type",attrs:{title:t.data.type}},[t._v(t._s(t.data.type))]),s("div",{staticClass:"main"},[t.data.type===t.QUESTION_TYPE.SINGLE_CHOICE?s("ul",t._l(t.data.options,function(e,i){return s("li",{key:e,staticClass:"mt-1"},[s("radio",{attrs:{disable:!0,checked:t.data.answer===i,message:e}})],1)})):t.data.type===t.QUESTION_TYPE.BLANK_FILLING?t._l(t.data.answer,function(e,i){return s("span",{key:i,staticClass:"mt-1 blank-filling-answer"},[t._v("\n        "+t._s(i+1)+". "+t._s(e)+"\n      ")])}):t.data.type===t.QUESTION_TYPE.MULTIPLE_CHOICE?s("ul",t._l(t.data.options,function(e,i){return s("li",{key:e.desc,staticClass:"mt-1"},[s("checkbox",{attrs:{checked:!!t.data.answers[i],disabled:!0,message:e}})],1)})):t._e()],2)]),s("div",{staticClass:"flex-row",staticStyle:{"align-self":"start"}},[s("i",{staticClass:"question-control fas fa-pencil-alt",on:{click:t.edit}}),s("i",{staticClass:"question-control fas fa-times",staticStyle:{"margin-left":"0.6em"},on:{click:t.del}})])])}),v=[],h=(s("c5f6"),{props:{data:{type:Object,required:!0},index:{type:Number,required:!0}},mounted:function(){},methods:{edit:function(){this.$emit("edit",this.deepCopy(this.data))},del:function(){this.$emit("del",this.deepCopy(this.data))}}}),g=h,b=(s("b9e7"),Object(c["a"])(g,f,v,!1,null,"4952ceaa",null));b.options.__file="question-item.vue";var _=b.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-column"},[s("label",{attrs:{for:"desc"}},[t._v("问题描述")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.question.desc,expression:"question.desc"}],attrs:{name:"desc",id:"desc",cols:"60",rows:"5",required:""},domProps:{value:t.question.desc},on:{input:function(e){e.target.composing||t.$set(t.question,"desc",e.target.value)}}}),s("label",{attrs:{for:"option"}},[t._v("问题选项")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.option,expression:"option"}],attrs:{name:"option",id:"option",cols:"60",rows:"5",required:""},domProps:{value:t.option},on:{input:function(e){e.target.composing||(t.option=e.target.value)}}}),s("span",{staticClass:"pure-form-message-inline"},[t._v("\n    添加选项, 并选中正确的选项\n  ")]),s("button",{staticClass:"pure-button",on:{click:function(e){return e.preventDefault(),t.addOption(e)}}},[t._v("\n    + 添加选项\n  ")]),s("ul",t._l(t.question.options,function(e,i){return s("li",{key:e,staticClass:"flex-row mt-1"},[s("radio",{attrs:{name:"options",id:"option"+i,message:e,checked:t.question.answer===i},on:{change:function(e){t.toChange(e,i)}}}),s("i",{staticClass:"fas fa-times flex-item-center ml-auto",on:{click:function(e){t.toDel(i)}}})],1)})),t.editing?s("div",{staticClass:"ml-auto"},[s("button",{staticClass:"pure-button button-success",on:{click:function(e){return e.preventDefault(),t.toUpdate(e)}}},[t._v("\n      更新\n    ")]),s("button",{staticClass:"ml-1 pure-button button-error",on:{click:function(e){return e.preventDefault(),t.toCancel(e)}}},[t._v("\n      取消\n    ")])]):s("button",{staticClass:"ml-auto pure-button pure-button-primary",on:{click:function(e){return e.preventDefault(),t.complete(e)}}},[t._v("+ 添加问题")])])},w=[],y={data:function(){return{question:{options:[],desc:"",answer:-1},option:"",editing:!1}},mounted:function(){this.$bus.$on("workshop-edit",this.toEdit)},destroyed:function(){this.$bus.$off("workshop-edit",this.toEdit)},methods:{addOption:function(){var t=this.option.trim();t&&(this.question.options.push(t),this.option="")},toChange:function(t,e){t.target.checked&&(this.question.answer=e)},toDel:function(t){this.question.options.splice(t,1)},toEdit:function(t){this.editing=!0,this.question=t},toCancel:function(){this.$emit("cancel"),this.editing=!1,this.reset()},toUpdate:function(){var t=!0,e="",s=this.question.desc.trim();-1===this.question.answer&&(t=!1,e="请选中正确答案"),0===this.question.options.length&&(t=!1,e="请添加选项"),s||(t=!1,e="请填写问题描述"),t?(this.$emit("update",this.deepCopy(this.question)),this.editing=!1,this.reset()):this.$alert("error",e)},complete:function(){var t=!0,e="",s=this.question.desc.trim();-1===this.question.answer&&(t=!1,e="请选中正确答案"),0===this.question.options.length&&(t=!1,e="请添加选项"),s||(t=!1,e="请填写问题描述"),t?(this.$emit("complete",this.deepCopy(this.question)),this.reset()):this.$alert("error",e)},reset:function(){this.question={options:[],desc:"",answer:-1}}}},x=y,k=Object(c["a"])(x,C,w,!1,null,null,null);k.options.__file="single-choice.vue";var q=k.exports,$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-column"},[s("label",{attrs:{for:"desc"}},[t._v("问题描述")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.question.desc,expression:"question.desc"}],attrs:{name:"desc",id:"desc",cols:"60",rows:"5"},domProps:{value:t.question.desc},on:{input:function(e){e.target.composing||t.$set(t.question,"desc",e.target.value)}}}),s("label",{attrs:{for:"option"}},[t._v("选项描述")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.option,expression:"option"}],attrs:{name:"option",id:"option",cols:"60",rows:"5"},domProps:{value:t.option},on:{input:function(e){e.target.composing||(t.option=e.target.value)}}}),s("span",{staticClass:"pure-form-message"},[t._v("\n    添加选项, 并选中正确的选项\n  ")]),s("button",{staticClass:"pure-button",on:{click:function(e){return e.preventDefault(),t.addOption(e)}}},[t._v("\n    + 添加选项\n  ")]),s("ul",t._l(t.question.options,function(e,i){return s("li",{key:e,staticClass:"flex-row"},[s("checkbox",{attrs:{"checkbox-class":"options",id:"option-"+i,message:e}}),s("i",{staticClass:"fas fa-times flex-item-center ml-auto",on:{click:function(e){t.toDel(i)}}})],1)})),t.editing?s("div",{staticClass:"ml-auto"},[s("button",{staticClass:"pure-button button-success",on:{click:function(e){return e.preventDefault(),t.toUpdate(e)}}},[t._v("\n      更新\n    ")]),s("button",{staticClass:"ml-1 pure-button button-error",on:{click:function(e){return e.preventDefault(),t.toCancel(e)}}},[t._v("\n      取消\n    ")])]):s("button",{staticClass:"ml-auto pure-button pure-button-primary",on:{click:function(e){return e.preventDefault(),t.complete(e)}}},[t._v("+ 添加问题")])])},E=[],N={data:function(){return{question:{options:[],desc:"",answers:[]},option:""}},mounted:function(){this.$bus.$on("workshop-edit",this.toEdit)},destroyed:function(){this.$bus.$off("workshop-edit",this.toEdit)},methods:{addOption:function(){""!==this.option.trim()&&(this.question.options.push(this.option.trim()),this.option="")},toEdit:function(t){this.editing=!0,this.question=t},toCancel:function(){this.$emit("cancel"),this.editing=!1,this.reset()},toUpdate:function(){for(var t=!0,e="",s=document.getElementsByClassName("options"),i=!1,n=0;n<s.length;n+=1)s[n].checked&&(i=!0),this.question.answers.push(s[n].checked);i||(t=!1,e="请选中正确的选项"),!this.question.options.length>0&&(t=!1,e="请添加选项"),this.question.desc||(t=!1,e="请填写问题描述"),t?(this.$emit("update",this.deepCopy(this.question)),this.editing=!1,this.reset()):this.$alert("error",e)},toDel:function(t){this.question.options.splice(t,1)},complete:function(){for(var t=!0,e="",s=document.getElementsByClassName("options"),i=!1,n=0;n<s.length;n+=1)s[n].checked&&(i=!0),this.question.answers.push(s[n].checked);i||(t=!1,e="请选中正确的选项"),!this.question.options.length>0&&(t=!1,e="请添加选项"),this.question.desc||(t=!1,e="请填写问题描述"),t?(this.$emit("complete",this.deepCopy(this.question)),this.reset()):this.$alert("error",e)},reset:function(){this.question={desc:"",options:[],answers:[]}}}},S=N,O=Object(c["a"])(S,$,E,!1,null,null,null);O.options.__file="multiple-choice.vue";var I=O.exports,D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-column"},[s("label",{attrs:{for:"desc"}},[t._v("问题描述")]),s("textarea",{attrs:{name:"desc",id:"desc",cols:"30",rows:"5"}}),t._m(0),t.editing?s("div",{staticClass:"ml-auto"},[s("button",{staticClass:"pure-button button-success",on:{click:function(e){return e.preventDefault(),t.toUpdate(e)}}},[t._v("\n      更新\n    ")]),s("button",{staticClass:"ml-1 pure-button button-error",on:{click:function(e){return e.preventDefault(),t.toCancel(e)}}},[t._v("\n      取消\n    ")])]):s("button",{staticClass:"ml-auto pure-button pure-button-primary",on:{click:function(e){return e.preventDefault(),t.complete(e)}}},[t._v("+ 添加问题")])])},P=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"pure-form-message"},[t._v("\n    使用特殊标记 "),s("code",[t._v("##...##")]),t._v(" 来插入空格和指定答案.\n    "),s("br"),t._v("\n    例子:\n    "),s("br"),t._v('\n    输入:\n   "1 + 1 = ##2## ?"\n    '),s("br"),t._v('\n    输出:\n    "1 + 1 = ___ ?"\n  ')])}],M=(s("a481"),function(t){var e,s=/##(\w+|\W+)##/g,i=t,n="___",o={answer:[]};do{e=s.exec(i),e&&o.answer.push(e[1])}while(e);return o.desc=i.replace(s,n),o}),j={data:function(){return{editing:!1}},mounted:function(){this.$bus.$on("workshop-edit",this.toEdit)},destroyed:function(){this.$bus.$off("workshop-edit",this.toEdit)},methods:{toEdit:function(t){this.editing=!0,document.getElementById("desc").value=t.descRaw},toCancel:function(){this.editing=!1,document.getElementById("desc").value="",this.$emit("cancel")},toUpdate:function(){var t=document.getElementById("desc");if(""!==t.value.trim()){var e=M(t.value);if(0!==e.answer.length){var s={desc:e.desc,descRaw:t.value,answer:e.answer};this.$emit("update",s),this.editing=!1,t.value=""}else this.$alert("error","问题描述格式不正确, 请重新输入")}else this.$alert("error","请填写问题描述")},complete:function(){var t=document.getElementById("desc");if(""!==t.value.trim()){var e=M(t.value);if(0!==e.answer.length){var s={desc:e.desc,descRaw:t.value,answer:e.answer};this.$emit("complete",s),t.value=""}else this.$alert("error","问题描述格式不正确, 请重新输入")}else this.$alert("error","请填写问题描述")}}},B=j,L=Object(c["a"])(B,D,P,!1,null,null,null);L.options.__file="blank-filling.vue";var T=L.exports,J={components:{QuestionItem:_,SingleChoice:q,MultipleChoice:I,BlankFilling:T},data:function(){return{types:[{name:"单选题",component:"single-choice"},{name:"多选题",component:"multiple-choice"},{name:"填空题",component:"blank-filling"}],editing:!1,editingIndex:0,questions:[],score:"",type:"single-choice"}},mounted:function(){var t=localStorage.getItem("tests-questions");t&&(this.questions=JSON.parse(t))},methods:{toComplete:function(t){Object.assign(t,{type:this.type,score:this.score}),this.questions.push(t)},next:function(t){localStorage.setItem("tests-questions",JSON.stringify(this.questions)),this.$emit("next",t)},toCancel:function(){this.editing=!1},toUpdate:function(t){this.editing=!1,Object.assign(t,{type:this.type,score:this.score}),this.$set(this.questions,this.editingIndex,t)},del:function(t){t&&t.desc&&(this.questions=this.questions.filter(function(e){return e.desc!==t.desc}),localStorage.setItem("tests-questions",JSON.stringify(this.questions)))},edit:function(t,e){this.editing=!0,this.editingIndex=e,this.type=t.type,this.$bus.$emit("workshop-edit",t)}}},R=J,U=Object(c["a"])(R,p,m,!1,null,null,null);U.options.__file="questions.vue";var A=U.exports,Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-row pd-1"},[s("form",{staticClass:"w-50 flex-column pure-form pure-form-stacked"},[s("div",{staticClass:"form-group"},[s("span",[t._v("访问限制")]),s("label",{staticClass:"pure-radio",attrs:{for:"public"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.accessbility,expression:"settings.accessbility"}],attrs:{type:"radio",id:"public",name:"accessbility"},domProps:{value:0,checked:t._q(t.settings.accessbility,0)},on:{change:function(e){t.$set(t.settings,"accessbility",0)}}}),t._v("\n        公开\n      ")]),s("label",{staticClass:"pure-radio",attrs:{for:"private"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.accessbility,expression:"settings.accessbility"}],attrs:{type:"radio",id:"private",name:"accessbility"},domProps:{value:1,checked:t._q(t.settings.accessbility,1)},on:{change:function(e){t.$set(t.settings,"accessbility",1)}}}),t._v("\n        私有\n      ")]),0===t.settings.accessbility?s("span",{staticClass:"pure-form-message"},[t._v("\n        允许任何人访问\n      ")]):s("span",{staticClass:"pure-form-message"},[t._v("\n        只允许指定用户访问\n      ")])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v("时间限制")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.timeLimit.minutes,expression:"settings.timeLimit.minutes"}],attrs:{type:"number"},domProps:{value:t.settings.timeLimit.minutes},on:{input:function(e){e.target.composing||t.$set(t.settings.timeLimit,"minutes",e.target.value)}}}),s("span",{staticClass:"pure-form-message"},[t._v("\n        分\n      ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.timeLimit.seconds,expression:"settings.timeLimit.seconds"}],attrs:{type:"number"},domProps:{value:t.settings.timeLimit.seconds},on:{input:function(e){e.target.composing||t.$set(t.settings.timeLimit,"seconds",e.target.value)}}}),s("span",{staticClass:"pure-form-message"},[t._v("\n        秒\n      ")])]),s("div",{staticClass:"form-group"},[s("span",[t._v("计时方式")]),s("label",{attrs:{for:"timerMode1"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.timerMode,expression:"settings.timerMode"}],attrs:{type:"radio",name:"timerMode",id:"timerMode1"},domProps:{value:0,checked:t._q(t.settings.timerMode,0)},on:{change:function(e){t.$set(t.settings,"timerMode",0)}}}),t._v("\n          单个问题  \n        ")]),s("label",{staticClass:"ml-1",attrs:{for:"timerMode2"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.timerMode,expression:"settings.timerMode"}],attrs:{type:"radio",name:"timerMode",id:"timerMode2"},domProps:{value:1,checked:t._q(t.settings.timerMode,1)},on:{change:function(e){t.$set(t.settings,"timerMode",1)}}}),t._v("\n          所有问题\n        ")]),0===t.settings.timerMode?s("span",{staticClass:"pure-form-message"},[t._v("\n          在限定时间内回答一个问题\n        ")]):s("span",{staticClass:"pure-form-message"},[t._v("\n          在限定时间内回答所有问题\n        ")])]),s("div",{staticClass:"form-group"},[s("span",[t._v("开放时间")]),s("label",{attrs:{for:"schedule-on"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.schedule,expression:"settings.schedule"}],attrs:{type:"radio",name:"schedule",id:"schedule-on"},domProps:{value:0,checked:t._q(t.settings.schedule,0)},on:{change:function(e){t.$set(t.settings,"schedule",0)}}}),t._v("\n        不限制\n      ")]),s("label",{staticClass:"ml-1",attrs:{for:"schedule-off"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.schedule,expression:"settings.schedule"}],attrs:{type:"radio",name:"schedule",id:"schedule-off"},domProps:{value:1,checked:t._q(t.settings.schedule,1)},on:{change:function(e){t.$set(t.settings,"schedule",1)}}}),t._v("\n        在特定时间开放\n      ")]),1===t.settings.openMode?s("span",{staticClass:"pure-form-message"},[t._v("\n        测试可以在任何时间进行\n      ")]):s("span",{staticClass:"pure-form-message"},[t._v("\n        测试只能在指定时间进行\n      ")])]),t.settings.schedule?s("div",{staticClass:"form-group"},[s("span",{staticClass:"form-group-label"},[t._v("Date & Time")]),s("div",{staticClass:"pure-g"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.date,expression:"settings.date"}],attrs:{type:"date",id:"scheduleDate",required:""},domProps:{value:t.settings.date},on:{input:function(e){e.target.composing||t.$set(t.settings,"date",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.time,expression:"settings.time"}],attrs:{type:"time",id:"scheduleTime",required:""},domProps:{value:t.settings.time},on:{input:function(e){e.target.composing||t.$set(t.settings,"time",e.target.value)}}})])]):t._e(),s("div",{staticClass:"ml-auto mt-auto flex-row"},[s("button",{staticClass:"ml-1 pure-button",on:{click:function(e){e.preventDefault(),t.next(-1)}}},[t._v("上一步")]),s("button",{staticClass:"ml-1 pure-button",on:{click:function(e){return e.preventDefault(),t.reset(e)}}},[t._v("重置")]),s("button",{staticClass:"ml-1 pure-button pure-button-primary",on:{click:function(e){return e.preventDefault(),t.save(e)}}},[t._v("\n        保存 & 下一步\n      ")])])]),1===t.settings.accessbility?s("whitelist",{staticClass:"flex-1",attrs:{list:t.settings.whitelist},on:{"add-mail":t.toAddMail,"del-mail":t.toDelMail}}):t._e()],1)},Y=[],F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"whitelist bd-1 shadow-1"},[s("div",{staticClass:"flex-row pure-form whitelist-header"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",id:"whitelist-search",placeholder:"Search"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),s("label",{staticClass:"ml-auto",attrs:{for:"whitelist-selectall"}},[t._v("\n      全选\n      "),s("input",{attrs:{type:"checkbox",id:"whitelist-selectall"},on:{change:t.selectAll}})]),s("button",{staticClass:"pure-button pure-button-primary ml-1",attrs:{disabled:""},on:{click:function(e){return e.preventDefault(),t.sendMail(e)}}},[t._v("发送邀请")])]),s("div",{staticClass:"whitelist-body"},[s("form",{staticClass:"mt-1 flex-row pure-form"},[s("div",{staticClass:"pure-control-group ml-auto"},[s("input",{attrs:{type:"email",placeholder:"Email",id:"email",required:""}}),s("button",{staticClass:"pure-button ml-1",on:{click:function(e){return e.preventDefault(),t.addEmail(e)}}},[t._v("+ 添加")])])]),s("ul",{staticClass:"mt-1"},t._l(t.filterdMails,function(e,i){return s("li",{key:e,staticClass:"flex-row mt-1"},[s("label",{staticClass:"flex-1  flex-item-center ml-1"},[s("input",{staticClass:"mail-checkbox",attrs:{type:"checkbox"}}),t._v("\n          "+t._s(e)+"\n        ")]),s("button",{staticClass:"pure-button button-error",on:{click:function(e){e.preventDefault(),t.delEmail(i)}}},[t._v("删除")])])}))])])},G=[],V=(s("3b2b"),{props:{list:{type:Array,default:[]}},computed:{filterdMails:function(){if(!this.keyword)return this.list;var t=new RegExp(this.keyword);return this.list.filter(function(e){return t.test(e)})}},data:function(){return{keyword:""}},methods:{selectAll:function(t){var e=t.target;if(e.checked)for(var s=document.getElementsByClassName("mail-checkbox"),i=0;i<s.length;i+=1)s[i].checked=!0;else for(var n=document.getElementsByClassName("mail-checkbox"),o=0;o<n.length;o+=1)n[o].checked=!1},sendMail:function(){var t=this;this.$axios.post("".concat(this.$url.sendmail,"/turing%20test")).then(function(){t.$alert("success","send mail success.")}).catch(console.log)},addEmail:function(){var t=document.getElementById("email");if(t.checkValidity())this.$emit("add-mail",t.value);else{var e=document.createElement("button");t.appendChild(e),e.click(),t.removeChild(e)}},delEmail:function(t){this.$emit("del-mail",t)}}}),H=V,W=(s("6ceb"),Object(c["a"])(H,F,G,!1,null,"b1ffa948",null));W.options.__file="whitelist.vue";var K=W.exports,X={components:{Whitelist:K},data:function(){return{settings:{accessbility:0,timeLimit:{minutes:0,seconds:10},timerMode:0,whitelist:[],schedule:0,scheduleAt:0,date:0,time:0}}},mounted:function(){var t=JSON.parse(localStorage.getItem("tests-settings"));t&&(this.settings=t)},methods:{toAddMail:function(t){-1===this.settings.whitelist.indexOf(t.toLowerCase())&&this.settings.whitelist.push(t.toLowerCase())},toDelMail:function(t){this.settings.whitelist.splice(t,1)},save:function(){if(this.settings.schedule){var t=document.getElementById("scheduleDate"),e=document.getElementById("scheduleTime");if(t.checkValidity()&&e.checkValidity()){var s="".concat(t.value," ").concat(e.value),i=new Date(s).getTime();this.settings.scheduleAt=i}}localStorage.setItem("tests-settings",JSON.stringify(this.settings)),this.next(1)},next:function(t){this.$emit("next",t)},reset:function(){var t=JSON.parse(localStorage.getItem("tests-settings"));t&&(this.settings=t)}}},z=X,Z=Object(c["a"])(z,Q,Y,!1,null,null,null);Z.options.__file="index.vue";var tt=Z.exports,et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-column justify-center"},[t.success?s("div",{staticClass:"flex-item-center mt-auto mb-auto"},[s("p",[t._v("发布成功")]),s("p",[s("router-link",{attrs:{to:"/"}},[t._v("前往查看")])],1)]):s("div",{staticClass:"flex-item-center mt-auto mb-auto"},[s("button",{staticClass:"pure-button",attrs:{disabled:t.flag},on:{click:function(e){t.next(-1)}}},[t._v("上一步\n    ")]),s("button",{staticClass:"ml-1 pure-button pure-button-primary ",attrs:{disabled:t.flag},on:{click:t.togglePreview}},[t._v("\n      预览\n    ")]),s("button",{staticClass:"ml-1 pure-button button-success",attrs:{disabled:t.flag},on:{click:t.publish}},[t._v("发布")])]),t.preview?s("preview",{attrs:{test:t.paper},on:{close:function(e){t.preview=!1}}}):t._e()],1)},st=[],it=s("bc3a"),nt=s.n(it),ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"preview-wrapper",on:{click:t.close}},[s("div",{staticClass:"preview-container",on:{click:function(t){return t.stopPropagation(),function(){return!1}()}}},[s("header",[s("h1",[t._v(t._s(t.test.title))]),s("small",[t._v(t._s(t.test.author))]),s("p",[t._v(t._s(t.test.intro))])]),s("section",[s("ul",t._l(t.test.questions,function(e,i){return s("li",{key:e.desc},[s("p",[t._v(t._s(i+1+". "+e.desc))]),"sc"===e.type?s("div",[s("ul",t._l(e.options,function(e,i){return s("li",{key:i},[s("div",{staticClass:"flex-row",staticStyle:{width:"80%","padding-left":"1em"}},[s("span",{staticClass:"flex-1"},[t._v(t._s(e.desc))]),s("input",{attrs:{type:"radio",name:"question.desc",disabled:""}})])])}))]):"bf"===e.type?s("div",[s("br"),s("br"),s("br")]):t._e()])}))]),s("footer")])])},at=[],rt={props:{test:{type:Object,required:!0}},methods:{close:function(){this.$emit("close")},next:function(){this.$emit("next",{type:"questions"})},publish:function(){this.$axios.post(this.$url.tests,this.paper)}}},lt=rt,ct=(s("c60e"),Object(c["a"])(lt,ot,at,!1,null,"69d332db",null));ct.options.__file="preview.vue";var ut=ct.exports,dt={components:{Preview:ut},data:function(){return{paper:{},preview:!1,success:!1,flag:!1}},mounted:function(){var t=JSON.parse(localStorage.getItem("tests-generals")),e=JSON.parse(localStorage.getItem("tests-questions")),s=JSON.parse(localStorage.getItem("tests-settings")),i=JSON.parse(localStorage.getItem("user"));this.paper={title:t.title,intro:t.intro,tags:t.tags,category:t.category,author:i.username,createdAt:Date.now(),totalScore:e.reduce(function(t,e){return t+ +e.score},0),questions:e,settings:s}},methods:{togglePreview:function(){this.preview=!this.preview},next:function(t){this.$emit("next",t)},clean:function(){localStorage.removeItem("tests-generals"),localStorage.removeItem("tests-questions"),localStorage.removeItem("tests-settings")},publish:function(){var t=this;this.flag||(this.flag=!0,nt.a.post(this.$url.tests,this.paper).then(function(){t.success=!0,t.flag=!1,t.clean()}).catch(function(){t.flag=!1}))}}},pt=dt,mt=Object(c["a"])(pt,et,st,!1,null,null,null);mt.options.__file="publish.vue";var ft=mt.exports,vt={components:{Generals:d,Questions:A,Settings:tt,Publish:ft},data:function(){return{active:0,tabs:[{name:"基础信息",component:"generals"},{name:"问题",component:"questions"},{name:"设置",component:"settings"},{name:"发布",component:"publish"}],status:[!1,!1,!1],counter:0}},methods:{toClickTab:function(t){t!==this.tabs.length-1||this.counter===this.status.length?this.active=t:this.$alert("error","请先保存所有表单")},jumpTo:function(t){1===t&&(this.status[this.active]||(this.counter+=1),this.$set(this.status,this.active,!0)),this.active+t!==this.tabs.length-1||this.counter===this.status.length?this.active+=t:this.$alert("error","请先保存所有表单")}}},ht=vt,gt=Object(c["a"])(ht,i,n,!1,null,null,null);gt.options.__file="index.vue";e["default"]=gt.exports},2621:function(t,e){e.f=Object.getOwnPropertySymbols},"28a5":function(t,e,s){s("214f")("split",2,function(t,e,i){"use strict";var n=s("aae3"),o=i,a=[].push,r="split",l="length",c="lastIndex";if("c"=="abbc"[r](/(b)*/)[1]||4!="test"[r](/(?:)/,-1)[l]||2!="ab"[r](/(?:ab)*/)[l]||4!="."[r](/(.?)(.?)/)[l]||"."[r](/()()/)[l]>1||""[r](/.?/)[l]){var u=void 0===/()??/.exec("")[1];i=function(t,e){var s=String(this);if(void 0===t&&0===e)return[];if(!n(t))return o.call(s,t,e);var i,r,d,p,m,f=[],v=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,g=void 0===e?4294967295:e>>>0,b=new RegExp(t.source,v+"g");u||(i=new RegExp("^"+b.source+"$(?!\\s)",v));while(r=b.exec(s)){if(d=r.index+r[0][l],d>h&&(f.push(s.slice(h,r.index)),!u&&r[l]>1&&r[0].replace(i,function(){for(m=1;m<arguments[l]-2;m++)void 0===arguments[m]&&(r[m]=void 0)}),r[l]>1&&r.index<s[l]&&a.apply(f,r.slice(1)),p=r[0][l],h=d,f[l]>=g))break;b[c]===r.index&&b[c]++}return h===s[l]?!p&&b.test("")||f.push(""):f.push(s.slice(h)),f[l]>g?f.slice(0,g):f}}else"0"[r](void 0,0)[l]&&(i=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(s,n){var o=t(this),a=void 0==s?void 0:s[e];return void 0!==a?a.call(s,o,n):i.call(String(o),s,n)},i]})},"3b2b":function(t,e,s){var i=s("7726"),n=s("5dbc"),o=s("86cc").f,a=s("9093").f,r=s("aae3"),l=s("0bfb"),c=i.RegExp,u=c,d=c.prototype,p=/a/g,m=/a/g,f=new c(p)!==p;if(s("9e1e")&&(!f||s("79e5")(function(){return m[s("2b4c")("match")]=!1,c(p)!=p||c(m)==m||"/a/i"!=c(p,"i")}))){c=function(t,e){var s=this instanceof c,i=r(t),o=void 0===e;return!s&&i&&t.constructor===c&&o?t:n(f?new u(i&&!o?t.source:t,e):u((i=t instanceof c)?t.source:t,i&&o?l.call(t):e),s?this:d,c)};for(var v=function(t){t in c||o(c,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})},h=a(u),g=0;h.length>g;)v(h[g++]);d.constructor=c,c.prototype=d,s("2aba")(i,"RegExp",c)}s("7a56")("RegExp")},"6ceb":function(t,e,s){"use strict";var i=s("f396"),n=s.n(i);n.a},7333:function(t,e,s){"use strict";var i=s("0d58"),n=s("2621"),o=s("52a7"),a=s("4bf8"),r=s("626a"),l=Object.assign;t.exports=!l||s("79e5")(function(){var t={},e={},s=Symbol(),i="abcdefghijklmnopqrst";return t[s]=7,i.split("").forEach(function(t){e[t]=t}),7!=l({},t)[s]||Object.keys(l({},e)).join("")!=i})?function(t,e){var s=a(t),l=arguments.length,c=1,u=n.f,d=o.f;while(l>c){var p,m=r(arguments[c++]),f=u?i(m).concat(u(m)):i(m),v=f.length,h=0;while(v>h)d.call(m,p=f[h++])&&(s[p]=m[p])}return s}:l},"9b37":function(t,e,s){},aae3:function(t,e,s){var i=s("d3f4"),n=s("2d95"),o=s("2b4c")("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==n(t))}},af10:function(t,e,s){},b9e7:function(t,e,s){"use strict";var i=s("af10"),n=s.n(i);n.a},c60e:function(t,e,s){"use strict";var i=s("9b37"),n=s.n(i);n.a},f396:function(t,e,s){},f751:function(t,e,s){var i=s("5ca1");i(i.S+i.F,"Object",{assign:s("7333")})}}]);
//# sourceMappingURL=workshopTests.3029e1c6.js.map