(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["polygon"],{"006c":function(t,e,s){"use strict";var n=s("fa40"),i=s.n(n);i.a},"048f":function(t,e,s){"use strict";var n=s("1135"),i=s.n(n);i.a},"06f4":function(t,e,s){"use strict";var n=s("084b"),i=s.n(n);i.a},"084b":function(t,e,s){},1135:function(t,e,s){},1861:function(t,e,s){},"197a":function(t,e,s){"use strict";var n=s("e45f"),i=s.n(n);i.a},"1f62":function(t,e,s){},"20cc":function(t,e,s){},"20f4":function(t,e,s){},2278:function(t,e,s){"use strict";var n=s("bccb"),i=s.n(n);i.a},2435:function(t,e,s){},2621:function(t,e){e.f=Object.getOwnPropertySymbols},"279b":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"polygon-container flex-row flex-1"},[s("sidebar",{attrs:{tabs:t.tabs,status:t.status,active:t.active},on:{click:t.toClickTab}}),s("div",{staticClass:"polygon-body pd-1 flex-1 flex-column"},[s(t.tabs[t.active],{tag:"component",on:{next:t.jumpTo}})],1)],1)},i=[],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"w-50",on:{click:t.toClick}},[s("form",{staticClass:"flex-column flex-1 pure-form pure-form-stacked",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[s("label",{attrs:{for:"Title"}},[t._v("Title")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.generals.title,expression:"generals.title"}],attrs:{type:"text",id:"title",name:"title",required:"",placeholder:"title"},domProps:{value:t.generals.title},on:{input:function(e){e.target.composing||t.$set(t.generals,"title",e.target.value)}}}),s("label",{attrs:{for:"tree-input"}},[t._v("Category")]),s("tree-input",{attrs:{show:t.show,data:t.data},on:{focus:function(e){t.show=!0},change:t.toChange}}),s("label",{attrs:{for:"tags"}},[t._v("Tags")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.generals.tags,expression:"generals.tags"}],attrs:{type:"text",id:"tags",name:"tags",required:"",placeholder:"tags"},domProps:{value:t.generals.tags},on:{input:function(e){e.target.composing||t.$set(t.generals,"tags",e.target.value)}}}),s("span",{staticClass:"pure-form-message"},[t._v("any keyword you want to add, seperate by comma ','.")]),s("div",{staticClass:"flex-row flex-wrap"},t._l(t.tags,function(t){return s("tag",{key:t,attrs:{text:t}})})),s("label",{attrs:{for:"intro"}},[t._v("Introduction")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.generals.intro,expression:"generals.intro"}],attrs:{name:"intro",id:"intro",cols:"60",rows:"10",required:"",placeholder:"introductions..."},domProps:{value:t.generals.intro},on:{input:function(e){e.target.composing||t.$set(t.generals,"intro",e.target.value)}}}),s("button",{staticClass:"ml-auto margin-top-auto pure-button pure-button-primary",attrs:{type:"submit"}},[t._v("Save & Next")])],1)])},o=[],r=(s("6b54"),s("28a5"),{data:function(){return{generals:{title:"",intro:"",tags:"",category:[]},prev:"",show:!1,data:[]}},computed:{tags:function(){var t=this.generals.tags,e=this.prev;return!e&&t?t.split(",").filter(function(t){return""!==t.trim()}):t&&","===t[t.length-1]?t.split(",").filter(function(t){return""!==t.trim()}):t&&e.length>t.length&&-1!==e.substr(t.length-1).indexOf(",")?t.split(",").filter(function(t){return""!==t.trim()}):t&&e&&e.split(",")!==t.split(",")?t.split(",").filter(function(t){return""!==t.trim()}):[]}},mounted:function(){var t=this,e=JSON.parse(localStorage.getItem("polygon-cards-generals"));e&&(this.generals=e),this.$axios.get(this.$url.category).then(function(e){t.data=e.data,t.data.category=t.generals.category}).catch(function(e){t.$alert("error",e.message)})},methods:{toChange:function(t){this.show=!1,this.generals.category=t.toString()},toClick:function(t){var e=document.getElementById("tree-input-popout");if(e){var s=e.getBoundingClientRect(),n=document.getElementById("tree-input"),i=n.getBoundingClientRect(),a=t.clientX,o=t.clientY;(a<s.left||a>s.right||o<s.top||o>s.bottom)&&(a<i.left||a>i.right||o<i.top||o>i.bottom)&&(this.show=!1)}},submit:function(){localStorage.setItem("polygon-cards-generals",JSON.stringify(this.generals)),this.$emit("next",1)}}}),l=r,c=s("2877"),u=Object(c["a"])(l,a,o,!1,null,null,null);u.options.__file="generals.vue";var d=u.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-row flex-1"},[s("div",{staticClass:"left w-50"},[s("form",{staticClass:"w-100 flex-column pure-form pure-form-stacked",attrs:{action:""}},[s("label",{attrs:{for:"front"}},[t._v("正面")]),s("textarea",{staticClass:"w-100",attrs:{name:"front",id:"front",cols:"30",rows:"10",required:""}}),s("label",{attrs:{for:"back"}},[t._v("反面")]),s("textarea",{staticClass:"w-100",attrs:{name:"back",id:"back",cols:"30",rows:"10",required:""}}),s("button",{staticClass:"pure-button",on:{click:function(e){return e.preventDefault(),t.createCard(e)}}},[t._v("Add Cards")])]),s("div",{staticClass:"flex-row"},[s("button",{staticClass:"ml-auto pure-button",on:{click:function(e){t.toNext(-1)}}},[t._v("Back")]),s("button",{staticClass:"pure-button pure-button-primary",on:{click:t.toSave}},[t._v("Save & Next")])])]),s("div",{staticClass:"right ml-1 flex-1"},[s("table",{staticClass:"w-100 pure-table pure-table-strip"},[s("caption",[t._v("Cards")]),t._m(0),s("tbody",t._l(t.cards,function(e,n){return s("tr",{key:e.front},[s("td",[t._v(t._s(n))]),s("td",[t._v(t._s(e.front))]),s("td",[t._v(t._s(e.back))])])}))])])])},f=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("#")]),s("th",[t._v("Front")]),s("th",[t._v("Back")])])])}],p={data:function(){return{cards:[]}},mounted:function(){var t=localStorage.getItem("polygon-cards-cards");t&&(this.cards=JSON.parse(t))},methods:{createCard:function(){var t=document.getElementById("front").value.trim(),e=document.getElementById("back").value.trim();t&&e&&this.cards.push({front:t,back:e})},delCard:function(){},toNext:function(t){this.$emit("next",t)},toSave:function(){localStorage.setItem("polygon-cards-cards",JSON.stringify(this.cards)),this.toNext(1)}}},h=p,v=(s("c8d0"),Object(c["a"])(h,m,f,!1,null,"40e8718a",null));v.options.__file="cards.vue";var g=v.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-1 flex-column justify-center"},[t.success?s("div",{staticClass:"flex-column flex-item-center"},[s("p",[t._v("发布成功")]),t._m(0)]):s("div",{staticClass:"flex-item-center"},[s("button",{staticClass:"pure-button",on:{click:function(e){t.next(-1)}}},[t._v("Back\n    ")]),s("button",{staticClass:"margin-left-1 pure-button button-success",on:{click:t.publish}},[t._v("Publishs")])])])},_=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[s("a",{attrs:{href:"/cards"}},[t._v("前往查看")])])}],x={data:function(){return{success:!1,flag:!1}},mounted:function(){},methods:{next:function(t){this.$emit("next",t)},publish:function(){var t=this;if(!this.flag){this.flag=!0;var e=JSON.parse(localStorage.getItem("polygon-cards-generals")),s=JSON.parse(localStorage.getItem("polygon-cards-cards")),n=JSON.parse(localStorage.getItem("user")),i={title:e.title,intro:e.intro,tags:e.tags,category:e.category,author:n.username,cards:s};localStorage.removeItem("polygon-cards-generals"),localStorage.removeItem("polygon-cards-cards"),this.$axios.post(this.$url.cards,i).then(function(){t.success=!0,t.flag=!1}).catch(function(){t.flag=!1})}}}},y=x,C=(s("006c"),Object(c["a"])(y,b,_,!1,null,"1d4c9319",null));C.options.__file="publish.vue";var w=C.exports,$={components:{Generals:d,Cards:g,Publish:w},data:function(){return{active:0,tabs:["generals","cards","publish"],status:[!1,!1],counter:0}},methods:{toClickTab:function(t){t!==this.tabs.length-1||this.counter===this.status.length?this.active=t:this.$alert("error","you have unsaved forms.")},jumpTo:function(t){1===t&&(this.status[this.active]||(this.counter+=1),this.status[this.active]=!0),this.active+t!==this.tabs.length-1||this.counter===this.status.length?this.active+=t:this.$alert("error","you have unsaved forms.")}}},k=$,S=(s("f961"),Object(c["a"])(k,n,i,!1,null,"8ebc1406",null));S.options.__file="index.vue";e["default"]=S.exports},"28a5":function(t,e,s){s("214f")("split",2,function(t,e,n){"use strict";var i=s("aae3"),a=n,o=[].push,r="split",l="length",c="lastIndex";if("c"=="abbc"[r](/(b)*/)[1]||4!="test"[r](/(?:)/,-1)[l]||2!="ab"[r](/(?:ab)*/)[l]||4!="."[r](/(.?)(.?)/)[l]||"."[r](/()()/)[l]>1||""[r](/.?/)[l]){var u=void 0===/()??/.exec("")[1];n=function(t,e){var s=String(this);if(void 0===t&&0===e)return[];if(!i(t))return a.call(s,t,e);var n,r,d,m,f,p=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,g=void 0===e?4294967295:e>>>0,b=new RegExp(t.source,h+"g");u||(n=new RegExp("^"+b.source+"$(?!\\s)",h));while(r=b.exec(s)){if(d=r.index+r[0][l],d>v&&(p.push(s.slice(v,r.index)),!u&&r[l]>1&&r[0].replace(n,function(){for(f=1;f<arguments[l]-2;f++)void 0===arguments[f]&&(r[f]=void 0)}),r[l]>1&&r.index<s[l]&&o.apply(p,r.slice(1)),m=r[0][l],v=d,p[l]>=g))break;b[c]===r.index&&b[c]++}return v===s[l]?!m&&b.test("")||p.push(""):p.push(s.slice(v)),p[l]>g?p.slice(0,g):p}}else"0"[r](void 0,0)[l]&&(n=function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)});return[function(s,i){var a=t(this),o=void 0==s?void 0:s[e];return void 0!==o?o.call(s,a,i):n.call(String(a),s,i)},n]})},"2b1b":function(t,e,s){},"2bf8":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"flex-1 flex-row"},[t.isAuthor?s("sidebar",{attrs:{tabs:t.tabs,active:t.active},on:{click:t.toClickTab}}):t._e(),s("div",{staticClass:"flex-1 flex-column"},["settings"===t.tabs[t.active]&&!t.loading&&t.isAuthor?s("settings",{attrs:{title:t.title},on:{save:t.toSave}}):t._e(),"generals"!==t.tabs[t.active]||t.loading?t._e():s("generals",{attrs:{test:t.test},on:{comment:t.toComment}}),"submissions"!==t.tabs[t.active]||t.loading?t._e():s("submissions",{attrs:{title:t.title}})],1)],1)},i=[],a=(s("a481"),s("bd82")),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"test-container"},[s("div",{staticClass:"flex-row"},[s("h1",{staticClass:"test-title"},[t._v(t._s(t.test.title))]),s("button",{staticClass:"ml-auto pure-button pure-button-primary flex-item-center"},[s("a",{attrs:{href:"/room/"+t.test.title,target:"_blank"}},[t._v("\n        Start Test\n      ")])])]),s("div",{staticClass:"flex-row"},[s("ul",{staticClass:"meta-list flex-1"},[s("li",{staticClass:"meta-list-item"},[s("span",{staticClass:"meta-label"},[t._v("作者")]),s("span",{staticClass:"meta"},[t._v(t._s(t.test.author))])]),s("li",{staticClass:"meta-list-item"},[s("span",{staticClass:"meta-label"},[t._v("创建时间")]),s("span",{staticClass:"meta"},[t._v(t._s(t._f("formatDateTime")(t.test.createdAt)))])]),s("li",{staticClass:"meta-list-item"},[s("span",{staticClass:"meta-label"},[t._v("评分")]),s("star",{staticClass:"meta",attrs:{disable:t.test.vote.disable,count:t.test.vote.count},on:{click:t.toVote}})],1),s("li",{staticClass:"meta-list-item"},[s("span",{staticClass:"meta-label"},[t._v("标签")]),s("span",{staticClass:"meta tag-list"},t._l(t.test.tags,function(t){return s("tag",{key:t,staticClass:"mr-1 mb-1",attrs:{text:t}})}))])]),s("rating",{staticClass:"ml-auto",attrs:{data:t.test.rating}})],1),s("p",{staticClass:"intro"},[t._v(t._s(t.test.intro))]),s("my-comment",{attrs:{data:t.test.comments},on:{submit:t.toComment}})],1)},r=[],l={props:{test:{type:Object,required:!0}},data:function(){return{vote:{disable:!1,count:0}}},methods:{toComment:function(t){this.$emit("comment",t)},toVote:function(t){this.test.vote.disable=!0,this.test.vote.count=t;var e=localStorage.getItem("jwt");this.$axios.put("".concat(this.$url.stars,"/").concat(this.test.title),{count:t},{withCredentials:!0,headers:{Authorization:"Bearer ".concat(e)}}).then(function(t){console.log(t)}).catch(console.log)}}},c=l,u=(s("048f"),s("2877")),d=Object(u["a"])(c,o,r,!1,null,"228d8600",null);d.options.__file="index.vue";var m=d.exports,f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("list",{attrs:{list:t.list,total:t.total},on:{click:t.toPage}})},p=[],h=s("4c0b"),v={props:{title:{type:String,required:!0}},data:function(){return{results:[],total:0,page:1}},computed:{list:function(){return this.results.map(function(t){return{content:"".concat(t.title," - ").concat(t.username," - ").concat(Object(h["a"])(t.createdAt)),to:"/results/".concat(t._id)}})}},mounted:function(){this.getData()},methods:{toPage:function(t){this.page=t,this.getData()},getData:function(){var t=this,e=localStorage.getItem("jwt");this.$axios.get("".concat(this.$url.results,"?title=").concat(this.title,"&page=").concat(this.page),{withCredentials:!0,headers:{Authorization:"Bearer ".concat(e)}}).then(function(e){t.results=e.data.results,t.total=e.data.total,console.log(t.total)}).catch(function(e){t.$alert("error",e.message)})}}},g=v,b=Object(u["a"])(g,f,p,!1,null,null,null);b.options.__file="index.vue";var _=b.exports,x={components:{Settings:a["a"],Generals:m,Submissions:_},props:{title:{type:String,required:!0}},data:function(){return{tabs:["generals","settings","submissions"],active:0,loading:!0,isAuthor:!1,test:{},comment:{flag:!1},settings:{flag:!1}}},beforeRouteEnter:function(t,e,s){var n=t.params.title,i=localStorage.getItem("jwt");s(function(t){t.$axios.get("".concat(t.$url.tests,"/").concat(n),{withCredentials:!0,headers:{Authorization:"Bearer ".concat(i)}}).then(function(e){t.test=e.data,t.loading=!1,window.$user&&(t.test.author===window.$user.username?(t.isAuthor=!0,t.tabs=["generals","settings","submissions"],window.localStorage.setItem("".concat(t.title,"-settings"),JSON.stringify(t.test.settings))):t.tabs=[])}).catch(function(e){t.$alert("error",e.response.data),t.$router.replace("/")})})},methods:{toClickTab:function(t){this.active=t},toComment:function(t){var e=this;if(!this.comment.flag){this.comment.flag=!0,this.test.comments.push(t);var s=localStorage.getItem("jwt");this.$axios.put("".concat(this.$url.tests,"/").concat(this.title),this.test,{withCredentials:!0,headers:{Authorization:"Bearer ".concat(s)}}).then(function(){e.comment.flag=!1}).catch(function(){e.comment.flag=!1})}},toSave:function(t){var e=this;this.settings.flag||this.$axios.put("".concat(this.$url.tests,"/").concat(this.title),{settings:t}).then(function(){e.settings.flag=!1}).catch(function(){e.settings.flag=!1})}}},y=x,C=(s("66d8"),Object(u["a"])(y,n,i,!1,null,"1f6cbd3e",null));C.options.__file="index.vue";e["default"]=C.exports},"336d":function(t,e,s){"use strict";var n=s("b6a3"),i=s.n(n);i.a},3853:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-row flex-1 h-100"},[s("div",{staticClass:"left flex-column shadow-1"},[s("div",{staticClass:"pd-1"},[s("img",{staticClass:"profile-avatar",attrs:{src:t.user.avatar,alt:"avatar"}}),s("div",{staticClass:"profile-item"},[t._v("\n        "+t._s(t.user.username)+"\n      ")]),s("div",{staticClass:"profile-item"},[t._v("\n        "+t._s(t.user.email)+"\n      ")]),s("p",{staticClass:"profile-item"},[t._v("\n        "+t._s(t.user.bio)+"\n      ")])]),s("ul",{staticClass:"nav-list"},t._l(t.tabs,function(e){return s("li",{key:e,staticClass:"profile-tab pd-1",class:{"profile-tab-active":t.active===e},on:{click:function(s){t.active=e}}},[t._v("\n        "+t._s(e)+"\n      ")])}))]),s(t.active,{tag:"component"})],1)},i=[],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-column flex-1 relative"},[s("calender",{on:{click:t.toClick}}),s("ul",{staticClass:"act-list"},t._l(t.list,function(e){return s("li",{key:e},[t._v("\n    "+t._s(e)+"\n    ")])}))],1)},o=[],r={data:function(){return{list:["創建了一個測試","練習了10分鐘的卡片","發表了2條評論","創建了一個牌組"]}},methods:{toClick:function(t){}}},l=r,c=(s("c640"),s("2877")),u=Object(c["a"])(l,a,o,!1,null,"6ff4edca",null);u.options.__file="index.vue";var d=u.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"profile-tests-container flex-column flex-1"},[s("form",{staticClass:"bg-2 pd-1 flex-row pure-form",on:{submit:function(t){t.preventDefault()}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"flex-item-center",attrs:{type:"text",placeholder:"Search"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),s("button",{staticClass:"ml-auto flex-item-center pure-button pure-button-primary"},[s("router-link",{staticStyle:{color:"white","text-decoration":"none"},attrs:{to:"/polygon/tests"}},[t._v("\n        Create New Test\n      ")])],1)]),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pd-1 flex-1 flex-column relative border-box"},[0!==t.tests.length||t.loading?s("ul",t._l(t.tests,function(e){return s("li",{key:e._id,staticClass:"mb-1"},[s("router-link",{attrs:{to:"/tests/"+e.title}},[t._v("\n          "+t._s(e.title)+"\n        ")])],1)})):s("no-data")],1),s("pager",{attrs:{total:t.total},on:{click:t.toPage}})],1)},f=[],p=s("d860"),h={data:function(){return{tests:[],page:1,total:0,keyword:"",loading:!0}},watch:{keyword:function(){this.getData()}},mounted:function(){this.getData()},methods:{toPage:function(t){this.page=t,this.getData()},getData:Object(p["a"])(function(){var t=this;window.$user&&this.$axios.get("".concat(this.$url.tests,"?username=").concat(window.$user.username,"&page=").concat(this.page,"&keyword=").concat(this.keyword)).then(function(e){t.tests=e.data.results,t.total=e.data.total,t.loading=!1}).catch(console.log)},300)}},v=h,g=Object(c["a"])(v,m,f,!1,null,null,null);g.options.__file="index.vue";var b=g.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-1 relative"},[s("list",{attrs:{list:t.list,total:t.total,loading:t.loading},on:{click:t.toPage,search:t.toSearch}})],1)},x=[],y=s("4c0b"),C={data:function(){return{results:[],total:0,page:1,keyword:"",loading:!0}},computed:{list:function(){return this.results.map(function(t){return{content:"".concat(t.title," - ").concat(t.scores,"/").concat(t.totalScores," - ").concat(Object(y["a"])(t.createdAt)),to:"/results/".concat(t._id)}})}},mounted:function(){this.getData()},methods:{toPage:function(t){this.page=t,this.getData()},toSearch:function(t){this.keyword=t,this.getData()},getData:Object(p["a"])(function(){var t=this,e=localStorage.getItem("user");e=JSON.parse(e),e&&this.$axios.get("\n        ".concat(this.$url.results,"?username=").concat(e.username,"&page=").concat(this.page,"&keyword=").concat(this.keyword)).then(function(e){t.results=e.data.results,t.total=e.data.total,t.loading=!1}).catch(console.log)},300)}},w=C,$=Object(c["a"])(w,_,x,!1,null,null,null);$.options.__file="index.vue";var k=$.exports,S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"profile-comments-container flex-column flex-1"},[s("list",{attrs:{list:t.list,total:t.total,loading:t.loading},on:{click:t.toPage,search:t.toSearch}})],1)},O=[],q={data:function(){return{data:[],page:1,total:0,keyword:"",loading:!0}},computed:{list:function(){return this.data.map(function(t){return{content:"".concat("".concat(t.content.substr(0,12),"...")," - ",t.title," - ").concat(Object(y["a"])(t.createdAt)),to:"/tests/".concat(t.title)}})}},mounted:function(){this.getData()},methods:{toPage:function(t){this.page=t,this.getData()},toSearch:function(t){this.keyword=t,this.getData()},getData:Object(p["a"])(function(){var t=this,e=window.$user,s=localStorage.getItem("jwt");e&&this.$axios.get("".concat(this.$url.comments,"?username=").concat(e.username,"&page=").concat(this.page,"&keyword=").concat(this.keyword),{withCredentials:!0,headers:{Authorization:"Bearer ".concat(s)}}).then(function(e){t.data=e.data.results,t.total=e.data.total,t.loading=!1}).catch(function(t){console.log(t)})},300)}},E=q,N=Object(c["a"])(E,S,O,!1,null,null,null);N.options.__file="index.vue";var T=N.exports,I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"pure-form pure-form-stacked flex-column mg-auto",staticStyle:{height:"600px"},on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[s("div",{staticClass:"flex-row flex-1"},[s("div",{staticClass:"left flex-column"},[s("label",{staticClass:"form-group-label",attrs:{for:"username"}},[t._v("Username")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],attrs:{type:"text",id:"username",name:"username",readonly:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),s("label",{staticClass:"form-group-label",attrs:{for:"email"}},[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],attrs:{type:"email",id:"email",name:"email",readonly:""},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),s("label",{staticClass:"form-group-label",attrs:{for:"bio"}},[t._v("Bio")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.user.bio,expression:"user.bio"}],attrs:{name:"bio",id:"bio",cols:"30",rows:"10"},domProps:{value:t.user.bio},on:{input:function(e){e.target.composing||t.$set(t.user,"bio",e.target.value)}}})]),s("div",{staticClass:"right ml-1 flex-column flex-item-top"},[s("img",{staticClass:"profile-avatar",attrs:{src:t.user.avatar,alt:"avatar",id:"avatar"}}),s("input",{attrs:{type:"file",name:"avatar"},on:{change:t.loadFile}})])]),s("div",{staticClass:"flex-item-center"},[s("button",{staticClass:"pure-button",on:{click:function(e){return e.preventDefault(),t.resetUser(e)}}},[t._v("Reset")]),s("button",{staticClass:"pure-button pure-button-primary margin-left-1"},[t._v("Save")])])])},j=[],P=(s("f751"),{data:function(){return{user:{},flag:!1}},mounted:function(){this.resetUser()},methods:{resetUser:function(){this.user=JSON.parse(JSON.stringify(window.$user))},save:function(t){var e=this;if(!this.flag){var s=t.target,n=new FormData(s),i=localStorage.getItem("jwt");this.flag=!0,this.$axios.put(this.$url.users,n,{withCredentials:!0,headers:{Authorization:"Bearer ".concat(i)}}).then(function(t){e.flag=!1,e.user=t.data;var s=Object.assign(JSON.parse(localStorage.getItem("user")),e.user);localStorage.setItem("user",JSON.stringify(s)),window.$user=s,window.location=location}).catch(function(t){e.$alert("error",t.message),e.flag=!1})}},loadFile:function(t){var e=t.target;if(e.files&&e.files[0]){var s=new FileReader;s.onload=function(t){document.getElementById("avatar").setAttribute("src",t.target.result)},s.readAsDataURL(e.files[0])}}}}),D=P,A=(s("e50d"),Object(c["a"])(D,I,j,!1,null,"0c321652",null));A.options.__file="index.vue";var B=A.exports,L={components:{Tests:b,Results:k,Comments:T,Activities:d,Settings:B},data:function(){return{user:{},loading:!0,active:"Tests",tabs:["Tests","Results","Comments","Activities","Settings"]}},mounted:function(){window.$user?(this.user=window.$user,this.loading=!1):(this.alert("error","please login first."),this.$router.push("/login"))}},M=L,J=(s("3f9a"),Object(c["a"])(M,n,i,!1,null,"5afe2874",null));J.options.__file="index.vue";e["default"]=J.exports},"3acb":function(t,e,s){},"3d02":function(t,e,s){"use strict";var n=s("1f62"),i=s.n(n);i.a},"3f88":function(t,e,s){},"3f9a":function(t,e,s){"use strict";var n=s("2435"),i=s.n(n);i.a},"446a":function(t,e,s){"use strict";var n=s("948f"),i=s.n(n);i.a},"4ab3":function(t,e,s){"use strict";var n=s("2b1b"),i=s.n(n);i.a},"4c0b":function(t,e,s){"use strict";e["a"]=function(t){var e=new Date(t),s=e.getFullYear(),n=e.getMonth()+1,i=e.getDay(),a=e.getHours(),o=e.getMinutes();return n<10&&(n="0"+n),i<10&&(i="0"+i),a<10&&(a="0"+a),o<10&&(o="0"+o),"".concat(s,"-").concat(n,"-").concat(i," ").concat(a,":").concat(o)}},"58e1":function(t,e,s){"use strict";var n=s("fd9a"),i=s.n(n);i.a},"66d8":function(t,e,s){"use strict";var n=s("6d03"),i=s.n(n);i.a},"6d03":function(t,e,s){},"72b5":function(t,e,s){},7333:function(t,e,s){"use strict";var n=s("0d58"),i=s("2621"),a=s("52a7"),o=s("4bf8"),r=s("626a"),l=Object.assign;t.exports=!l||s("79e5")(function(){var t={},e={},s=Symbol(),n="abcdefghijklmnopqrst";return t[s]=7,n.split("").forEach(function(t){e[t]=t}),7!=l({},t)[s]||Object.keys(l({},e)).join("")!=n})?function(t,e){var s=o(t),l=arguments.length,c=1,u=i.f,d=a.f;while(l>c){var m,f=r(arguments[c++]),p=u?n(f).concat(u(f)):n(f),h=p.length,v=0;while(h>v)d.call(f,m=p[v++])&&(s[m]=f[m])}return s}:l},"73a6":function(t,e,s){},7895:function(t,e,s){},7898:function(t,e,s){},8428:function(t,e,s){},"8e39":function(t,e,s){"use strict";var n=s("72b5"),i=s.n(n);i.a},"92a1":function(t,e,s){},"92a3":function(t,e,s){},"948f":function(t,e,s){},"99a1":function(t,e,s){"use strict";var n=s("7898"),i=s.n(n);i.a},"9e31":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("router-view")},i=[],a={},o=a,r=s("2877"),l=Object(r["a"])(o,n,i,!1,null,null,null);l.options.__file="index.vue";e["default"]=l.exports},a18f:function(t,e,s){"use strict";var n=s("3acb"),i=s.n(n);i.a},a338:function(t,e,s){"use strict";var n=s("8428"),i=s.n(n);i.a},a654:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"room-container flex-1 flex-column"},[t.loaded?s("div",{staticClass:"flex-1 flex-column"},[t.preparing?s("before-test",{attrs:{settings:t.test.settings,length:t.test.questions.length},on:{start:t.start}}):t.end?s("after-test",{attrs:{id:t.result._id}}):s("div",[s("div",{staticClass:"flex-row mt-1"},[s("span",{staticClass:"ml-auto exit",on:{click:t.exit}},[s("i",{staticClass:"fas fa-door-closed",on:{click:t.exit}}),t._v("\n          Exit\n        ")])]),s("question-card",{staticClass:"mt-1",attrs:{question:t.test.questions[t.currentIndex],reply:t.replys[t.currentIndex]},on:{complete:t.toComplete}}),s("div",{staticClass:"flex-row mt-1"},[t.test.settings.timerMode===t.$constants.ALL?s("button",{staticClass:"pure-button",on:{click:function(e){t.next(t.currentIndex-1)}}},[t._v("prev")]):t._e(),s("button",{staticClass:"pure-button",on:{click:function(e){t.next(t.currentIndex+1)}}},[t._v("next")]),s("button",{staticClass:"pure-button pure-button-primary",staticStyle:{"margin-left":"auto"},on:{click:function(e){return e.preventDefault(),t.toSubmit(e)}}},[t._v("Sumbit")])]),t.test.settings.timerMode===t.$constants.ALL?s("footer",{staticClass:"flex-row mt-1"},[s("ul",{staticClass:"pager flex-1"},t._l(t.test.questions.length,function(e){return s("li",{key:e,staticClass:"pager-index",class:{active:t.currentIndex+1===e,done:t.replys[e-1]},attrs:{id:"pager-"+e},on:{click:function(s){t.next(e-1)}}},[s("span",[t._v(t._s(e))])])}))]):t._e()],1)],1):t._e(),t.preparing||t.end?t._e():s("timer",{attrs:{"total-time":t.remainningTime,"total-questions-cnt":10,"rest-questions-cnt":20},on:{timeout:t.toTimeout,pong:t.toPong}})],1)},i=[],a=(s("a481"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"body flex-column"},[t.settings.schedule&&!t.counting?s("div",[s("p",[t._v("\n        Test will be started at "+t._s(t.settings.date+" : "+t.settings.time)+".\n      ")])]):s("div",[s("p",[t._v("\n        There is "+t._s(t.length)+" questions.\n      ")]),t.settings.timerMode===t.$constants.EACH?s("p",[t._v("\n        Each quesition has time limit\n        "+t._s(t.settings.timeLimit.minutes?t.settings.timeLimit.minutes+"minutes":"")+"\n        "+t._s(t.settings.timeLimit.seconds?t.settings.timeLimit.seconds+" seconds":"")+"\n      ")]):t.settings.timerMode===t.$constants.ALL?s("p",[t._v("\n        Time Limit is\n        "+t._s(t.settings.timeLimit.minutes?t.settings.timeLimit.minutes+" minutes":"")+"\n        "+t._s(t.settings.timeLimit.seconds?t.settings.timeLimit.seconds+" seconds":"")+"\n      ")]):t._e(),s("p",[t._v("\n        Test will start in "+t._s(t._f("clock")(t.remainingTime))+"\n      ")])])])])}),o=[],r=(s("c5f6"),{props:{settings:{type:Object,required:!0},length:{type:Number}},data:function(){return{remainingTime:3e3,counting:!1,countdownHandler:null}},watch:{remainingTime:function(t){0===t&&(clearInterval(this.countdownHandler),this.$emit("start"))}},mounted:function(){this.settings.schedule?Date.now()>this.settings.scheduleAt&&this.countdown():this.countdown()},methods:{countdown:function(){var t=this;this.counting=!0;var e=1e3;this.countdownHandler=setInterval(function(){t.remainingTime-=e},e)}}}),l=r,c=(s("a338"),s("2877")),u=Object(c["a"])(l,a,o,!1,null,"07409e93",null);u.options.__file="before-test.vue";var d=u.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("p",[t._v("Text is end.")]),s("a",{attrs:{href:"/results/"+t.id}},[t._v("see the result.")])])},f=[],p={props:{id:{type:String,required:!0}}},h=p,v=Object(c["a"])(h,m,f,!1,null,null,null);v.options.__file="after-test.vue";var g=v.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"meta-info",on:{click:t.toggleMeta}},[t.mini?s("span",{staticClass:"meta-default"},[t._v("\n    "+t._s(t._f("clock")(t.remainingTime))+"\n  ")]):s("div",{staticClass:"meta-detail"},[s("dl",[s("dt",[t._v("\n        剩余时间\n      ")]),s("dd",[t._v("\n        "+t._s(t._f("clock")(t.remainingTime))+"\n      ")]),s("dt",[t._v("\n        剩餘題數\n      ")]),s("dd",[t._v("\n        "+t._s(t.restQuestionsCnt)+"\n      ")]),s("dt",[t._v(" 縂題數 ")]),s("dd",[t._v(" "+t._s(t.totalQuestionsCnt)+" ")])])])])},_=[],x={props:{totalTime:{type:Number},totalQuestionsCnt:{type:Number},restQuestionsCnt:{type:Number}},data:function(){return{remainingTime:0,handler:null,mini:!0,beginTime:0}},mounted:function(){var t=this,e=1e3;this.remainingTime=this.totalTime;var s=function s(){t.remainingTime-=e,t.remainingTime<=0?(clearTimeout(t.handler),t.handler=null,t.$emit("timeout",Date.now()-t.beginTime)):t.handler=setTimeout(s,e)};this.beginTime=Date.now(),setTimeout(s,e),this.$bus.$on("ping",this.ping)},destroyed:function(){this.$bus.$off("ping",this.ping)},methods:{ping:function(){this.$emit("pong",Date.now()-this.beginTime)},toggleMeta:function(){var t=this;this.mini?this.mini=!1:(document.getElementsByClassName("meta-detail")[0].classList+=" slideOut",setTimeout(function(){t.mini=!0},300))}}},y=x,C=(s("197a"),Object(c["a"])(y,b,_,!1,null,"0f3bc0b4",null));C.options.__file="timer.vue";var w=C.exports,$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"question-card flex-column"},[s("div",{staticClass:"question-card-header"},[t._v("\n    "+t._s(t.question.desc)+"\n  ")]),s("div",{staticClass:"question-card-body flex-row"},[s(t.question.type,{tag:"component",attrs:{data:t.question,reply:t.reply},on:{complete:t.complete}})],1)])},k=[],S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"single-choice"},[s("ul",{staticClass:"single-choice-options"},t._l(t.data.options,function(e,n){return s("li",{key:e},[s("radio",{attrs:{id:"option"+n,message:e,name:"single-choice-options",checked:t.localReply===n},on:{change:function(e){t.changeOption(e,n)}}})],1)}))])},O=[],q={props:{data:{type:Object,required:!0},reply:{default:-1}},data:function(){return{localReply:this.reply}},mounted:function(){this.$bus.$on("room-next",this.submit)},destroyed:function(){this.$bus.$off("room-next",this.submit)},methods:{changeOption:function(t,e){t.target.checked&&(this.localReply=e)},submit:function(t){this.$emit("complete",{reply:this.localReply,index:t.index,submit:t.submit})}}},E=q,N=(s("2278"),Object(c["a"])(E,S,O,!1,null,"2beaaba2",null));N.options.__file="single-choice.vue";var T=N.exports,I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"flex-column"},t._l(t.data.options,function(e,n){return s("li",{key:e,staticClass:"option"},[s("checkbox",{attrs:{id:"option"+n,"checkbox-class":"mc-option",message:e,checked:!!(t.reply&&t.reply.length>n)&&t.reply[n]}})],1)}))},j=[],P={props:{data:{type:Object},reply:{}},mounted:function(){this.$bus.$on("room-next",this.complete)},destroyed:function(){this.$bus.$off("room-next",this.complete)},methods:{complete:function(t){for(var e=[],s=document.getElementsByClassName("mc-option"),n=0;n<s.length;n+=1)s[n].checked?e.push(!0):e.push(!1);this.$emit("complete",{reply:e,index:t.index,submit:t.submit})}}},D=P,A=(s("a18f"),Object(c["a"])(D,I,j,!1,null,null,null));A.options.__file="multiple-choice.vue";var B=A.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-1"},t._l(t.data.answer.length,function(e){return s("div",{key:e},[s("input",{staticClass:"pure-input replys",attrs:{type:"text"},domProps:{value:t.reply&&t.reply[e-1]?t.reply[e-1]:""}})])}))},M=[],J={props:{data:{type:Object},reply:{}},mounted:function(){this.$bus.$on("room-next",this.complete)},destroyed:function(){this.$bus.$off("room-next",this.complete)},methods:{complete:function(t){for(var e=[],s=document.getElementsByClassName("replys"),n=0;n<s.length;n+=1)e.push(s[n].value.trim());console.log("blank-filing",this.reply,e),this.$emit("complete",{reply:e,index:t.index,submit:t.submit})}}},R=J,Q=(s("b573"),Object(c["a"])(R,L,M,!1,null,"4438a345",null));Q.options.__file="blank-filling.vue";var F=Q.exports,U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.localReply,expression:"localReply"}],staticClass:"flex-1",domProps:{value:t.localReply},on:{input:function(e){e.target.composing||(t.localReply=e.target.value)}}})},Y=[],z={props:{data:{type:Object},reply:{default:""}},data:function(){return{localReply:this.reply}},mounted:function(){this.$bus.$on("room-next",this.complete)},destroyed:function(){this.$bus.$off("room-next",this.complete)},methods:{complete:function(t){this.$emit("complete",{reply:this.localReply,index:t.index,submit:t.submit})}}},H=z,G=Object(c["a"])(H,U,Y,!1,null,null,null);G.options.__file="opening.vue";var V=G.exports,K={components:{SingleChoice:T,MultipleChoice:B,Opening:V,BlankFilling:F},props:{question:{type:Object,required:!0},reply:{}},methods:{complete:function(t){this.$emit("complete",t)}}},X=K,W=(s("3d02"),Object(c["a"])(X,$,k,!1,null,"4fbb9ce0",null));W.options.__file="question-card.vue";var Z=W.exports,tt={components:{BeforeTest:d,AfterTest:g,Timer:w,QuestionCard:Z},props:{title:{type:String,required:!0}},data:function(){return{test:{},remainningTime:0,currentIndex:1,replys:[],end:!1,loaded:!1,flag:!1,result:{},preparing:!0,timeUsed:0,dataCollected:!1}},mounted:function(){var t=this,e=localStorage.getItem("test-session");if(e)e=JSON.parse(e),this.test=e.test,this.remainningTime=e.remainningTime,this.currentIndex=e.currentIndex,this.replys=e.replys,this.loaded=!0,this.preparing=e.preparing;else{var s=localStorage.getItem("jwt");this.$axios.get("".concat(this.$url.tests,"/").concat(this.title),{withCredentials:!0,headers:{Authorization:"Bearer ".concat(s)}}).then(function(e){t.test=e.data,t.resetTimer(),t.beginTime=Date.now(),t.loaded=!0}).catch(function(){t.loaded=!0})}},methods:{toTimeout:function(){this.test.settings.timerMode===this.$constants.EACH?this.currentIndex===this.test.questions.length-1?this.toSubmit():(this.currentIndex+=1,this.refreshCache(),this.resetTimer()):this.test.settings.timerMode===this.$constants.ALL&&this.toSubmit()},start:function(){this.resetTimer(),this.preparing=!1},refreshCache:function(){var t={remainningTime:this.remainningTime,currentIndex:this.currentIndex,replys:this.replys,preparing:this.preparing,test:this.test};localStorage.setItem("test-session",JSON.stringify(t))},cleanCache:function(){localStorage.removeItem("test-session")},resetTimer:function(){var t=this.test.settings.timeLimit,e=t.minutes,s=t.seconds;this.remainningTime=60*e*1e3+1e3*s},next:function(t){t<0||t>=this.test.questions.length||this.$bus.$emit("room-next",{index:t,submit:!1})},toComplete:function(t){this.replys[this.currentIndex]=t.reply,t.submit?0!==this.timeUsed?this.submit():this.dataCollected=!0:(this.currentIndex=t.index,this.refreshCache(),this.resetTimer())},toPong:function(t){this.timeUsed=t,this.dataCollected&&this.submit()},toSubmit:function(){this.$bus.$emit("ping"),this.$bus.$emit("room-next",{index:-1,submit:!0})},formatResult:function(){var t=this,e=window.$user,s={title:this.test.title,username:e.username,score:this.test.questions.reduce(function(e,s,n){var i=!1;return s.type===t.$TYPES.MULTIPLE_CHOICE&&t.replys[n].join("")===s.answers.join("")&&(i=!0),s.type===t.$TYPES.SINGLE_CHOICE&&t.replys[n]===s.answer&&(i=!0),s.type===t.$TYPES.OPENING&&t.replys[n]===s.answer&&(i=!0),i&&(e+=s.score),e},0),totalScore:this.test.totalScore,details:this.test.questions.map(function(e,s){return t.replys[s]?e.type===t.$TYPES.MULTIPLE_CHOICE?{question:e,reply:t.replys[s],verdict:t.replys[s].join("")===e.answers.join("")?0:1}:e.type===t.$TYPES.SINGLE_CHOICE?{question:e,reply:t.replys[s],verdict:t.replys[s]===e.answer?0:1}:e.type===t.$TYPES.OPENING?{question:e,reply:t.replys[s],verdict:t.replys[s]===e.answer?0:1}:e.type===t.$TYPES.BLANK_FILLING?{question:e,reply:t.replys[s],verdict:t.replys[s].join("")===e.answer.join("")?0:1}:{}:{question:e,reply:null,verdict:!1}})};return s},submit:function(){var t=this;if(!this.flag){this.cleanCache();var e=this.formatResult();e.createdAt=Date.now();var s=1e3*(60*this.test.settings.timeLimit.minutes+this.test.settings.timeLimit.seconds);e.timeUsed=this.timeUsed,e.timeLimit=s;var n=localStorage.getItem("jwt");this.flag=!0,this.$axios.post("".concat(this.$url.results),e,{withCredentials:!0,headers:{Authorization:"Bearer ".concat(n)}}).then(function(e){console.log(e),t.flag=!1,t.end=!0,t.result=e.data}).catch(function(e){t.flag=!1,t.$alert("error",e.message)})}},exit:function(){this.$router.replace("/")},confirm:function(){return window.confirm("you will lose your changes, are you sure to exit?")}},destroyed:function(){this.cleanCache()},beforeRouteLeave:function(t,e,s){this.confirm()?(this.cleanCache(),this.$bus.$emit("changeMode","normal"),window.$mode="normal",s()):s(!1)}},et=tt,st=(s("336d"),Object(c["a"])(et,n,i,!1,null,"2b7b1ed2",null));st.options.__file="index.vue";e["default"]=st.exports},a661:function(t,e,s){"use strict";var n=s("3f88"),i=s.n(n);i.a},a6a8:function(t,e,s){},acfe:function(t,e,s){"use strict";var n=s("a6a8"),i=s.n(n);i.a},b51b:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"card flex-column"},[s("div",{staticClass:"flex-row mt-1"},[s("span",{staticClass:"ml-auto exit",on:{click:t.exit}},[s("i",{staticClass:"fas fa-door-closed"}),t._v("\n        离开\n      ")])]),s("div",{staticClass:"card-meta flex-row"},[s("p",[t._v("Round "+t._s(t.round))]),s("small",{staticClass:"ml-auto flex-item-center"},[t._v("\n      progress "+t._s(t.index+1+" / "+t.cards.length)+"\n    ")])]),s("div",{staticClass:"card-body text-center"},["front"===t.view?s("p",[t._v("\n      "+t._s(t.cards[t.index]?t.cards[t.index].front:"")+"\n    ")]):s("p",[t._v("\n      "+t._s(t.cards[t.index]?t.cards[t.index].back:"")+"\n    ")])]),"front"===t.view?s("div",{staticClass:"ml-auto mt-2"},[s("button",{staticClass:"pure-button",on:{click:t.toRemember}},[t._v("remember")]),s("button",{staticClass:"pure-button ml-1",on:{click:t.toForget}},[t._v("don't remeber")])]):s("button",{staticClass:"ml-auto mt-2 pure-button",on:{click:t.toNext}},[t._v("next")])])},i=[];s("a481");var a={props:{title:{type:String,required:!0}},data:function(){return{view:"front",loading:!0,index:0,originalCards:[],cards:[],round:1,rememberCards:[],forgetCards:[]}},mounted:function(){this.getData()},methods:{toRemember:function(){this.rememberCards.push(this.cards[this.index]),document.getElementsByClassName("card-body")[0].classList.add("card-back"),this.view="back"},toForget:function(){this.forgetCards.push(this.cards[this.index]),document.getElementsByClassName("card-body")[0].classList.add("card-back"),this.view="back"},toNext:function(){this.index+1>=this.cards.length?this.forgetCards.length>0?(this.index=0,this.cards=this.forgetCards,this.forgetCards=[]):(this.round+=1,this.cards=this.originalCards,this.rememberCards=[],this.forgetCards=[],this.index=0):this.index+=1,document.getElementsByClassName("card-body")[0].classList.remove("card-back"),this.view="front"},getData:function(){var t=this;this.$axios.get("".concat(this.$url.cards,"/").concat(this.title)).then(function(e){t.cards=e.data.cards,console.log(t.cards),t.loading=!1,t.originalCards=e.data.cards}).catch(function(t){console.log(t)})},confirm:function(){return window.confirm("You really want to quit?")},exit:function(){this.$router.replace("/")}},beforeRouteLeave:function(t,e,s){this.confirm()?(this.$bus.$emit("changeMode","normal"),window.$mode="normal",s()):s(!1)}},o=a,r=(s("fb3e"),s("2877")),l=Object(r["a"])(o,n,i,!1,null,"81572caa",null);l.options.__file="index.vue";e["default"]=l.exports},b573:function(t,e,s){"use strict";var n=s("1861"),i=s.n(n);i.a},b6a3:function(t,e,s){},b91f:function(t,e,s){"use strict";var n=s("73a6"),i=s.n(n);i.a},bccb:function(t,e,s){},bd82:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"width flex-row flex-1 pd-1"},[s("form",{staticClass:"width-50 flex-column pure-form pure-form-stacked"},[s("div",{staticClass:"form-group"},[s("span",[t._v("Accessbility")]),s("label",{staticClass:"pure-radio",attrs:{for:"public"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.accessbility,expression:"settings.accessbility"}],attrs:{type:"radio",id:"public",name:"accessbility"},domProps:{value:0,checked:t._q(t.settings.accessbility,0)},on:{change:function(e){t.$set(t.settings,"accessbility",0)}}}),t._v("\n        Public\n      ")]),s("label",{staticClass:"pure-radio",attrs:{for:"private"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.accessbility,expression:"settings.accessbility"}],attrs:{type:"radio",id:"private",name:"accessbility"},domProps:{value:1,checked:t._q(t.settings.accessbility,1)},on:{change:function(e){t.$set(t.settings,"accessbility",1)}}}),t._v("\n        Private\n      ")]),0===t.settings.accessbility?s("span",{staticClass:"pure-form-message"},[t._v("\n        any user can access this test.\n      ")]):s("span",{staticClass:"pure-form-message"},[t._v("\n        only users in white list has permisssion.\n      ")])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v("Time Limit")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.timeLimit.minutes,expression:"settings.timeLimit.minutes"}],attrs:{type:"number"},domProps:{value:t.settings.timeLimit.minutes},on:{input:function(e){e.target.composing||t.$set(t.settings.timeLimit,"minutes",e.target.value)}}}),s("span",{staticClass:"pure-form-message"},[t._v("\n        minutes\n      ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.timeLimit.seconds,expression:"settings.timeLimit.seconds"}],attrs:{type:"number"},domProps:{value:t.settings.timeLimit.seconds},on:{input:function(e){e.target.composing||t.$set(t.settings.timeLimit,"seconds",e.target.value)}}}),s("span",{staticClass:"pure-form-message"},[t._v("\n        Seconds\n      ")])]),s("div",{staticClass:"form-group"},[s("span",[t._v("Timer Mode")]),s("label",{attrs:{for:"timerMode1"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.timerMode,expression:"settings.timerMode"}],attrs:{type:"radio",name:"timerMode",id:"timerMode1"},domProps:{value:0,checked:t._q(t.settings.timerMode,0)},on:{change:function(e){t.$set(t.settings,"timerMode",0)}}}),t._v("\n          Each Question\n        ")]),s("label",{staticClass:"margin-left-1",attrs:{for:"timerMode2"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.timerMode,expression:"settings.timerMode"}],attrs:{type:"radio",name:"timerMode",id:"timerMode2"},domProps:{value:1,checked:t._q(t.settings.timerMode,1)},on:{change:function(e){t.$set(t.settings,"timerMode",1)}}}),t._v("\n          All Question\n        ")]),0===t.settings.timerMode?s("span",{staticClass:"pure-form-message"},[t._v("\n          Time Limit is set for each question,\n          automatically jump to next question when timeout.\n        ")]):s("span",{staticClass:"pure-form-message"},[t._v("\n          Time Limit is set for all questions.\n          Paticipants can choose questions.\n        ")])]),s("div",{staticClass:"form-group"},[s("span",[t._v("Schedule")]),s("label",{attrs:{for:"schedule-on"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.schedule,expression:"settings.schedule"}],attrs:{type:"radio",name:"schedule",id:"schedule-on"},domProps:{value:0,checked:t._q(t.settings.schedule,0)},on:{change:function(e){t.$set(t.settings,"schedule",0)}}}),t._v("\n        off\n      ")]),s("label",{staticClass:"margin-left-1",attrs:{for:"schedule-off"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.schedule,expression:"settings.schedule"}],attrs:{type:"radio",name:"schedule",id:"schedule-off"},domProps:{value:1,checked:t._q(t.settings.schedule,1)},on:{change:function(e){t.$set(t.settings,"schedule",1)}}}),t._v("\n        on\n      ")]),1===t.settings.openMode?s("span",{staticClass:"pure-form-message"},[t._v("\n        test awalys opened.\n      ")]):s("span",{staticClass:"pure-form-message"},[t._v("\n        test can only be accessd on schedulted time.\n      ")])]),t.settings.schedule?s("div",{staticClass:"form-group"},[s("span",{staticClass:"form-group-label"},[t._v("Date & Time")]),s("div",{staticClass:"pure-g"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.date,expression:"settings.date"}],attrs:{type:"date",id:"scheduleDate",required:""},domProps:{value:t.settings.date},on:{input:function(e){e.target.composing||t.$set(t.settings,"date",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.time,expression:"settings.time"}],attrs:{type:"time",id:"scheduleTime",required:""},domProps:{value:t.settings.time},on:{input:function(e){e.target.composing||t.$set(t.settings,"time",e.target.value)}}})])]):t._e(),s("div",{staticClass:"ml-auto margin-top-auto flex-row"},[t.title?t._e():s("button",{staticClass:"ml-1 pure-button",on:{click:function(e){e.preventDefault(),t.next(-1)}}},[t._v("Back")]),s("button",{staticClass:"ml-1 pure-button",on:{click:function(e){return e.preventDefault(),t.reset(e)}}},[t._v("Reset")]),s("button",{staticClass:"ml-1 pure-button pure-button-primary",on:{click:function(e){return e.preventDefault(),t.save(e)}}},[t._v("\n        "+t._s(this.title?"Save":"Save & Next")+"\n      ")]),this.title?s("button",{staticClass:"ml-1 pure-button button-error",on:{click:function(e){return e.preventDefault(),t.del(e)}}},[t._v("\n        Delete\n      ")]):t._e()])]),1===t.settings.accessbility?s("div",{staticClass:"background-gray flex-1 flex-column whitelist"},[s("div",{staticClass:"flex-row pure-form whitelist-header"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",id:"whitelist-search",placeholder:"Search"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),s("label",{staticStyle:{"margin-left":"auto"},attrs:{for:"whitelist-selectall"}},[t._v("\n        Select All\n        "),s("input",{attrs:{type:"checkbox",id:"whitelist-selectall"},on:{change:t.selectAll}})]),s("button",{staticClass:"pure-button pure-button-primary ml-1",on:{click:function(e){return e.preventDefault(),t.sendMail(e)}}},[t._v("Send Invite Mail")])]),s("div",{staticClass:"whitelist-body"},[s("div",{staticClass:"header flex-row"},[s("form",{staticClass:"ml-auto margin-top-1 pure-form"},[s("div",{staticClass:"pure-control-group"},[s("input",{attrs:{type:"email",placeholder:"Email",id:"email"}}),s("button",{staticClass:"pure-button margin-left-1",on:{click:function(e){return e.preventDefault(),t.addEmail(e)}}},[t._v("+ Add")])])])]),s("ul",{staticClass:"margin-top-1 overflow-y"},t._l(t.filterdMails,function(e){return s("li",{key:e,staticClass:"flex-row mt-1"},[s("label",{staticClass:"flex-1  flex-item-center",staticStyle:{"margin-left":"0.6em"}},[s("input",{staticClass:"mail-checkbox",attrs:{type:"checkbox"}}),t._v("\n            "+t._s(e)+"\n          ")]),s("button",{staticClass:"pure-button button-error",on:{click:function(s){s.preventDefault(),t.delEmail(e)}}},[t._v("delete")])])}))])]):t._e()])},i=[],a=(s("a481"),s("3b2b"),{props:{title:{type:String}},computed:{filterdMails:function(){if(!this.mailKeyword)return this.settings.whitelist;var t=new RegExp(this.mailKeyword);return this.settings.whitelist.filter(function(e){return t.test(e)})}},data:function(){return{settings:{accessbility:0,timeLimit:{minutes:0,seconds:10},timerMode:0,whitelist:[],schedule:0,scheduleAt:0,date:0,time:0},keyword:""}},mounted:function(){var t;t=this.title?JSON.parse(localStorage.getItem("".concat(this.title,"-settings"))):JSON.parse(localStorage.getItem("settings")),t&&(this.settings=t)},methods:{selectAll:function(t){var e=t.target;if(e.checked)for(var s=document.getElementsByClassName("mail-checkbox"),n=0;n<s.length;n+=1)s[n].checked=!0;else for(var i=document.getElementsByClassName("mail-checkbox"),a=0;a<i.length;a+=1)i[a].checked=!1},save:function(){if(this.settings.schedule){var t=document.getElementById("scheduleDate"),e=document.getElementById("scheduleTime");if(t.checkValidity()&&e.checkValidity()){var s="".concat(t.value," ").concat(e.value),n=new Date(s).getTime();this.settings.scheduleAt=n}}this.title?(localStorage.setItem("".concat(this.title,"-settings"),JSON.stringify(this.settings)),this.$emit("save",this.settings)):localStorage.setItem("settings",JSON.stringify(this.settings)),this.next(1)},next:function(t){this.$emit("next",t)},reset:function(){var t=JSON.parse(JSON.stringify(this.data));t&&(this.settings=t)},sendMail:function(){var t=this;this.$axios.post("".concat(this.$url.sendmail,"/turing%20test")).then(function(){t.$alert("success","send mail success.")}).catch(console.log)},addEmail:function(){var t=document.getElementById("email");if(t.checkValidity())this.settings.whitelist.push(t.value);else{var e=document.createElement("button");t.appendChild(e),e.click(),t.removeChild(e)}},delEmail:function(t){this.settings.whitelist=this.settings.whitelist.filter(function(e){return e!==t})},del:function(){var t=this,e=localStorage.getItem("jwt");this.$axios.delete("".concat(this.$url.tests,"/").concat(this.title),{withCredentials:!0,headers:{Authorization:"Bearer ".concat(e)}}).then(function(e){e.data.ok&&(t.$alert("success","Test Deleted."),setTimeout(function(){t.$router.replace("/")},300))}).catch(console.log)}}}),o=a,r=(s("446a"),s("2877")),l=Object(r["a"])(o,n,i,!1,null,"21142b84",null);l.options.__file="settings.vue";e["a"]=l.exports},c640:function(t,e,s){"use strict";var n=s("92a3"),i=s.n(n);i.a},c752:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"card-group pd-1 flex-column"},[t.loading?t._e():[s("div",{staticClass:"flex-row"},[s("h1",[t._v(t._s(t.data.title))]),s("button",{staticClass:"\n      pure-button pure-button-primary ml-auto\n      flex-item-center\n      "},[s("a",{attrs:{href:"/room/pratice/"+t.data.title,target:"_blank"}},[t._v("\n        start test\n      ")])])]),s("div",{staticClass:"flex-row"},[s("img",{staticStyle:{"object-fit":"cover"},attrs:{src:"/logo.png",alt:"",width:"200px",height:"200px"}}),s("ul",{staticClass:"ml-1 flex-1 meta-list"},[s("li",{staticClass:"meta-list-item"},[s("span",{staticClass:"meta-label"},[t._v("作者")]),s("span",{staticClass:"meta-value"},[t._v(t._s(t.data.author))])]),s("li",{staticClass:"meta-list-item"},[s("span",{staticClass:"meta-label"},[t._v("發佈日期")]),s("span",{staticClass:"meta-value"},[t._v(t._s(t._f("formatDateTime")(t.data.createdAt)))])]),s("li",{staticClass:"meta-list-item"},[s("span",{staticClass:"meta-label"},[t._v("目錄")]),s("span",{staticClass:"meta-value"},[t._v("\n          "+t._s(t.data.category.toString())+"\n        ")])]),s("li",{staticClass:"meta-list-item"},[s("span",{staticClass:"meta-label"},[t._v("评价")]),s("span",[s("star",{staticClass:"meta-value",attrs:{disable:t.data.vote.disable,count:6-t.data.vote.count},on:{click:t.toVote}})],1)]),s("li",{staticClass:"meta-list-item"},[s("span",{staticClass:"meta-label"},[t._v("標簽")]),t._l(t.data.tags,function(t){return s("tag",{key:t,staticClass:"meta-value",attrs:{text:t}})})],2),s("li",{staticClass:"meta-list-item"},[s("span",{staticClass:"meta-label"},[t._v("卡片數量")]),s("span",{staticClass:"meta-value"},[t._v(t._s(t.data.cards.length))])])]),s("rating",{attrs:{data:t.data.rating}})],1),s("div",{staticClass:"mt-1"},[t._v("\n    "+t._s(t.data.intro?t.data.intro:"")+"\n  ")]),s("my-comment",{staticClass:"mt-1",attrs:{data:t.data.comments},on:{submit:t.toComment}})]],2)},i=[],a={props:{title:{type:String,required:!0}},data:function(){return{data:"",loading:!0}},mounted:function(){var t=this;this.$axios.get("".concat(this.$url.cards,"/").concat(this.title)).then(function(e){t.data=e.data,console.log(t.data),t.loading=!1})},methods:{toComment:function(t){this.data.comments.push(t),this.$axios.put("".concat(this.$url.cards,"/").concat(this.title),this.data).then(function(){})},toVote:function(t){this.data.vote.disable=!0,this.data.vote.count=t;var e=localStorage.getItem("jwt");this.$axios.put("".concat(this.$url.voteCards,"/").concat(this.data.title),{count:t},{withCredentials:!0,headers:{Authorization:"Bearer ".concat(e)}}).then(function(t){}).catch(console.log)}}},o=a,r=(s("4ab3"),s("2877")),l=Object(r["a"])(o,n,i,!1,null,"52900c50",null);l.options.__file="index.vue";e["default"]=l.exports},c8d0:function(t,e,s){"use strict";var n=s("7895"),i=s.n(n);i.a},d661:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"cards pd-1"},[s("div",{staticClass:"cards-header flex-column"},[s("div",{staticClass:"ml-auto pure-button pure-button-primary"},[s("router-link",{attrs:{to:"/polygon/cards"}},[t._v("\n        Create new Cards \n      ")])],1),s("form",{staticClass:"pure-form mt-1",on:{submit:function(t){t.preventDefault()}}},[s("div",{staticClass:"flex-row"},[s("input",{staticClass:"ml-auto",attrs:{type:"text",name:"cards-search",id:"cards-search",placeholder:"search"}}),s("select",{directives:[{name:"model",rawName:"v-model",value:t.view,expression:"view"}],staticClass:"ml-1",attrs:{name:"cards-view",id:"cards-view"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.view=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"table-view"}},[t._v("table")]),s("option",{attrs:{value:"grid-view"}},[t._v("card")])])])])]),t.loading?t._e():s(t.view,{tag:"component",staticClass:"mt-1",attrs:{cards:t.cards}})],1)},i=[],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",{staticClass:"mt-1 pure-table pure-table-horizontal w-100"},[t._m(0),s("tbody",t._l(t.cards,function(e){return s("tr",{key:e.title,staticClass:"pure-table-row"},[s("td",[s("router-link",{attrs:{to:"/cards/"+e.title}},[t._v("\n          "+t._s(e.title)+"\n        ")])],1),s("td",[t._v(t._s(e.author))]),s("td",[t._v(t._s(e.category.toString()))]),s("td",[t._v(t._s(t._f("formatDateTime")(e.createdAt)))])])}))])},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",{},[s("tr",[s("th",[t._v("标题")]),s("th",[t._v("作者")]),s("th",[t._v("分類")]),s("th",[t._v("創建時間")])])])}],r={props:{cards:{type:Array,required:!0}}},l=r,c=(s("b91f"),s("2877")),u=Object(c["a"])(l,a,o,!1,null,"5057bc38",null);u.options.__file="table.vue";var d=u.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cardview"},t._l(t.cards,function(e,n){return s("card-group",{key:e.title+n,staticClass:"cardview-card",attrs:{data:e},on:{click:function(s){t.toCard(e)}}})}))},f=[],p={props:{cards:{type:Array,required:!0}},methods:{toCard:function(t){this.$router.push("/cards/"+t.title)}}},h=p,v=(s("8e39"),Object(c["a"])(h,m,f,!1,null,"31fbe05a",null));v.options.__file="grid.vue";var g=v.exports,b={components:{TableView:d,GridView:g},data:function(){return{cards:[],view:"table-view",loading:!0}},mounted:function(){var t=this;this.$axios.get(this.$url.cards).then(function(e){t.cards=e.data,t.cards=t.cards.concat(t.cards),t.cards=t.cards.concat(t.cards),t.cards=t.cards.concat(t.cards),t.cards=t.cards.concat(t.cards),t.cards=t.cards.concat(t.cards),t.cards=t.cards.concat(t.cards),t.loading=!1}).catch(function(t){console.log(t)})}},_=b,x=(s("acfe"),Object(c["a"])(_,n,i,!1,null,"06e80916",null));x.options.__file="index.vue";e["default"]=x.exports},e45f:function(t,e,s){},e50d:function(t,e,s){"use strict";var n=s("20f4"),i=s.n(n);i.a},e978:function(t,e,s){"use strict";var n=s("20cc"),i=s.n(n);i.a},ea92:function(t,e,s){},f751:function(t,e,s){var n=s("5ca1");n(n.S+n.F,"Object",{assign:s("7333")})},f961:function(t,e,s){"use strict";var n=s("ea92"),i=s.n(n);i.a},fa40:function(t,e,s){},fb3e:function(t,e,s){"use strict";var n=s("92a1"),i=s.n(n);i.a},fc55:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"polygon-container flex-1 flex-row h-100"},[s("sidebar",{attrs:{tabs:t.tabs,status:t.status,active:t.active},on:{click:t.toClickTab}}),s("div",{staticClass:"polygon-body pd-1 flex-1 flex-column"},[s(t.tabs[t.active],{tag:"component",on:{next:t.jumpTo}})],1)],1)},i=[],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-1 w-50",on:{click:t.toClick}},[s("form",{staticClass:"flex-column width-50 flex-1 pure-form pure-form-stacked",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[s("label",{attrs:{for:"Title"}},[t._v("Title")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.generals.title,expression:"generals.title"}],attrs:{type:"text",id:"title",name:"title",required:"",placeholder:"title"},domProps:{value:t.generals.title},on:{input:function(e){e.target.composing||t.$set(t.generals,"title",e.target.value)}}}),s("label",{attrs:{for:"tree-input"}},[t._v("Category")]),s("tree-input",{attrs:{show:t.show,data:t.data},on:{focus:function(e){t.show=!0},change:t.toChange}}),s("label",{attrs:{for:"tags"}},[t._v("Tags")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.generals.tags,expression:"generals.tags"}],attrs:{type:"text",id:"tags",name:"tags",required:"",placeholder:"tags"},domProps:{value:t.generals.tags},on:{input:function(e){e.target.composing||t.$set(t.generals,"tags",e.target.value)}}}),s("span",{staticClass:"pure-form-message"},[t._v("any keyword you want to add, seperate by comma ','.")]),s("div",{staticClass:"flex-row flex-wrap"},t._l(t.tags,function(t){return s("tag",{key:t,attrs:{text:t}})})),s("label",{attrs:{for:"intro"}},[t._v("Introduction")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.generals.intro,expression:"generals.intro"}],attrs:{name:"intro",id:"intro",cols:"60",rows:"10",required:"",placeholder:"introductions..."},domProps:{value:t.generals.intro},on:{input:function(e){e.target.composing||t.$set(t.generals,"intro",e.target.value)}}}),s("button",{staticClass:"ml-auto margin-top-auto pure-button pure-button-primary",attrs:{type:"submit"}},[t._v("Save & Next")])],1)])},o=[],r=(s("28a5"),{data:function(){return{generals:{title:"",intro:"",tags:"",category:[]},prev:"",show:!1,data:[]}},computed:{tags:function(){var t=this.generals.tags,e=this.prev;return!e&&t?t.split(",").filter(function(t){return""!==t.trim()}):t&&","===t[t.length-1]?t.split(",").filter(function(t){return""!==t.trim()}):t&&e.length>t.length&&-1!==e.substr(t.length-1).indexOf(",")?t.split(",").filter(function(t){return""!==t.trim()}):t&&e&&e.split(",")!==t.split(",")?t.split(",").filter(function(t){return""!==t.trim()}):[]}},mounted:function(){var t=this,e=JSON.parse(localStorage.getItem("generals"));e&&(this.generals=e),this.$axios.get(this.$url.category).then(function(e){t.data=e.data}).catch(function(e){t.$alert("error",e.message)})},methods:{toChange:function(t){this.show=!1,this.generals.category=t},toClick:function(t){var e=document.getElementById("tree-input-popout");if(e){var s=e.getBoundingClientRect(),n=document.getElementById("tree-input"),i=n.getBoundingClientRect(),a=t.clientX,o=t.clientY;(a<s.left||a>s.right||o<s.top||o>s.bottom)&&(a<i.left||a>i.right||o<i.top||o>i.bottom)&&(this.show=!1)}},submit:function(){localStorage.setItem("generals",JSON.stringify(this.generals)),this.$emit("next",1)}}}),l=r,c=s("2877"),u=Object(c["a"])(l,a,o,!1,null,null,null);u.options.__file="generals.vue";var d=u.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-1 flex-row"},[s("form",{staticClass:"w-50 pure-form pure-form-stacked flex-column"},[s("label",{attrs:{for:"type"}},[t._v("Question Type")]),s("select",{attrs:{name:"type",id:"type"},domProps:{value:t.type},on:{change:function(e){t.changeType(e)}}},t._l(t.types,function(e){return s("option",{key:e.name,domProps:{value:e.component}},[t._v("\n        "+t._s(e.name)+"\n      ")])})),s("label",{attrs:{for:"score"}},[t._v("\n      Score\n    ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.score,expression:"score"}],attrs:{type:"Number",min:"0",id:"score",name:"score",placeholder:"10"},domProps:{value:t.score},on:{input:function(e){e.target.composing||(t.score=e.target.value)}}}),s(t.type,{tag:"component",staticClass:"flex-1",staticStyle:{flex:"1 0 auto"},on:{complete:t.toComplete}}),s("div",{staticClass:"ml-auto flex-row"},[s("button",{staticClass:"pure-button",on:{click:function(e){e.preventDefault(),t.next(-1)}}},[t._v("\n        Back\n      ")]),s("button",{staticClass:"pure-button pure-button-primary margin-left-1",on:{click:function(e){e.preventDefault(),t.next(1)}}},[t._v("\n        Save & Next\n      ")])])],1),s("ul",{staticClass:"flex-1 flex-column overflow-y"},t._l(t.questions,function(e,n){return s("li",{key:e.desc,staticClass:"margin-bottom-xs"},[s("question-item",{attrs:{index:n+1,data:e},on:{del:function(e){t.del(e,n)},edit:function(e){t.edit(e,n)}}})],1)}))])},f=[],p=(s("f751"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"question-container mt-1 flex-row"},[s("div",{staticClass:"flex-1"},[s("div",{staticClass:"desc"},[t._v("\n      #"+t._s(t.index)+". "+t._s(t.data.desc)+"\n    ")]),s("span",{staticClass:"question-score",attrs:{title:"score"}},[t._v("\n      "+t._s(t.data.score||0)+"\n    ")]),s("br"),s("span",{staticClass:"question-type",attrs:{title:t.data.type}},[t._v(t._s(t.data.type))]),s("div",{staticClass:"main"},["single-choice"===t.data.type?s("ul",t._l(t.data.options,function(e,n){return s("li",{key:e},[s("radio",{attrs:{disable:!0,checked:t.data.answer===n,message:e}})],1)})):"opening"===t.data.type?s("div",{staticClass:"answer"},[t._v("\n        "+t._s(t.data.answer)+"\n      ")]):"blank-filling"===t.data.type?t._l(t.data.answer,function(e,n){return s("span",{key:n,staticClass:"mt-1 blank-filling-answer"},[t._v("\n        "+t._s(n+1)+". "+t._s(e)+"\n      ")])}):"multiple-choice"===t.data.type?s("ul",t._l(t.data.options,function(e,n){return s("li",{key:e.desc},[s("checkbox",{attrs:{checked:!!t.data.answers[n],disabled:!0,message:e}})],1)})):t._e()],2)]),s("div",{staticClass:"flex-row",staticStyle:{"align-self":"start"}},[s("i",{staticClass:"question-control fas fa-pencil-alt",on:{click:t.edit}}),s("i",{staticClass:"question-control fas fa-times",staticStyle:{"margin-left":"0.6em"},on:{click:t.del}})])])}),h=[],v=(s("c5f6"),{props:{data:{type:Object,required:!0},index:{type:Number,required:!0}},mounted:function(){},methods:{edit:function(){this.$emit("edit",this.data)},del:function(){this.$emit("del",this.data)}}}),g=v,b=(s("e978"),Object(c["a"])(g,p,h,!1,null,"b499a9e6",null));b.options.__file="question-item.vue";var _=b.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-column"},[s("label",{attrs:{for:"desc"}},[t._v("Description")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.question.desc,expression:"question.desc"}],attrs:{name:"desc",id:"desc",cols:"60",rows:"5",required:""},domProps:{value:t.question.desc},on:{input:function(e){e.target.composing||t.$set(t.question,"desc",e.target.value)}}}),s("label",{attrs:{for:"option"}},[t._v("Option")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.option,expression:"option"}],attrs:{name:"option",id:"option",cols:"60",rows:"5",required:""},domProps:{value:t.option},on:{input:function(e){e.target.composing||(t.option=e.target.value)}}}),s("button",{staticClass:"pure-button",on:{click:function(e){return e.preventDefault(),t.addOption(e)}}},[t._v("\n    Add Option\n  ")]),s("hr"),s("span",{staticClass:"pure-form-message-inline"},[t._v("\n    add options and check the correct answer.\n  ")]),s("ul",t._l(t.question.options,function(e,n){return s("li",{key:e},[s("div",{staticClass:"option flex-row"},[s("radio",{attrs:{name:"options",id:"option"+n,message:e},on:{change:function(e){t.toChange(e,n)}}})],1)])})),s("button",{staticClass:"ml-auto pure-button pure-button-primary",on:{click:function(e){return e.preventDefault(),t.complete(e)}}},[t._v("Add Question")])])},y=[],C={data:function(){return{question:{options:[],desc:"",answer:-1},option:""}},methods:{addOption:function(){if(""!==this.option.trim()){var t=this.option.trim();t&&(this.question.options.push(t),this.option="")}},toChange:function(t,e){t.target.checked&&(this.question.answer=e)},complete:function(){var t=this.question.desc.trim();t&&-1!==this.question.index&&this.$emit("complete",this.question)}}},w=C,$=Object(c["a"])(w,x,y,!1,null,null,null);$.options.__file="single-choice.vue";var k=$.exports,S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-column"},[s("label",{attrs:{for:"desc"}},[t._v("Description")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.question.desc,expression:"question.desc"}],attrs:{name:"desc",id:"desc",cols:"60",rows:"5"},domProps:{value:t.question.desc},on:{input:function(e){e.target.composing||t.$set(t.question,"desc",e.target.value)}}}),s("label",{attrs:{for:"option"}},[t._v("Option")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.option,expression:"option"}],attrs:{name:"option",id:"option",cols:"60",rows:"5"},domProps:{value:t.option},on:{input:function(e){e.target.composing||(t.option=e.target.value)}}}),s("button",{staticClass:"pure-button",on:{click:function(e){return e.preventDefault(),t.addOption(e)}}},[t._v("\n    Add Option\n  ")]),s("hr"),s("span",{staticClass:"pure-form-message-inline"},[t._v("\n    check the correct answer.\n  ")]),s("ul",t._l(t.question.options,function(t,e){return s("li",{key:t},[s("checkbox",{attrs:{"checkbox-class":"options",id:"option-"+e,message:t}})],1)})),s("button",{staticClass:"ml-auto pure-button pure-button-primary",on:{click:function(e){return e.preventDefault(),t.complete(e)}}},[t._v("Add Question")])])},O=[],q={data:function(){return{question:{options:[],desc:"",answers:[]},option:""}},methods:{addOption:function(){""!==this.option.trim()&&(this.question.options.push(this.option),this.option="")},complete:function(){for(var t=document.getElementsByClassName("options"),e=!1,s=0;s<t.length;s+=1)t[s].checked&&(e=!0),this.question.answers.push(t[s].checked);e?this.$emit("complete",this.question):this.$alert("error","please select correct answers.")}}},E=q,N=Object(c["a"])(E,S,O,!1,null,null,null);N.options.__file="multiple-choice.vue";var T=N.exports,I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-column"},[s("label",{attrs:{for:"desc"}},[t._v("Description")]),s("textarea",{attrs:{name:"desc",id:"desc",cols:"30",rows:"5"}}),t._m(0),s("button",{staticClass:"ml-auto pure-button pure-button-primary",on:{click:function(e){return e.preventDefault(),t.complete(e)}}},[t._v("Add Question")])])},j=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"pure-form-message"},[t._v("\n    Use ##...## to insert blank and answer.\n    "),s("br"),t._v("\n    Example:\n    "),s("br"),t._v('\n   "1 + 1 = ##2## ?"\n    '),s("br"),t._v("\n    =>\n    "),s("br"),t._v('\n    "1 + 1 = ___ ?"\n  ')])}],P=(s("a481"),function(t){var e,s=/##(\w+|\W+)##/g,n=t,i="___",a={answer:[]};do{e=s.exec(n),e&&a.answer.push(e[1])}while(e);return a.desc=n.replace(s,i),a}),D={methods:{complete:function(){var t=document.getElementById("desc").value;if(""!==t.trim()){var e=P(t),s={desc:e.desc,answer:e.answer};this.$emit("complete",s)}}}},A=D,B=Object(c["a"])(A,I,j,!1,null,null,null);B.options.__file="blank-filling.vue";var L=B.exports,M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-column"},[s("label",{attrs:{for:"desc"}},[t._v("Description")]),s("textarea",{attrs:{name:"desc",id:"desc",rows:"5"}}),s("label",{attrs:{for:"answer"}},[t._v("Your Answer")]),s("textarea",{attrs:{name:"answer",id:"answer",rows:"5"}}),s("button",{staticClass:"ml-auto pure-button pure-button-primary",on:{click:function(e){return e.preventDefault(),t.complete(e)}}},[t._v("Add Question")])])},J=[],R={methods:{complete:function(){var t=document.getElementById("desc"),e=document.getElementById("answer"),s=e.value.trim(),n=t.value.trim();if(n&&s){e.value="",t.value="";var i={desc:n,answer:s};this.$emit("complete",i)}}}},Q=R,F=Object(c["a"])(Q,M,J,!1,null,null,null);F.options.__file="opening.vue";var U=F.exports,Y={components:{QuestionItem:_,SingleChoice:k,MultipleChoice:T,BlankFilling:L,Opening:U},data:function(){return{types:[{name:"Single Choice",component:"single-choice"},{name:"Multiple Choice",component:"multiple-choice"},{name:"Blank Filling",component:"blank-filling"},{name:"Opening",component:"opening"}],editing:!1,editingIndex:0,loading:!0,questions:[],type:"single-choice",score:""}},mounted:function(){var t=localStorage.getItem("questions");t&&(this.questions=JSON.parse(t)),this.loading=!1},methods:{toComplete:function(t){var e=Object.assign({},t,{type:this.type,score:this.score});this.questions.push(e)},changeType:function(t){this.type=t.target.value},update:function(){},next:function(t){localStorage.setItem("questions",JSON.stringify(this.questions)),this.$emit("next",t)},del:function(t){t&&t.desc&&(this.questions=this.questions.filter(function(e){return e.desc!==t.desc}),localStorage.setItem("questions",JSON.stringify(this.questions)))},edit:function(t,e){var s=this;this.editing=!0,this.editingIndex=e,this.type=t.type,this.$nextTick(function(){switch(t.type){case"sc":var e=document.getElementById("sc-desc");e.value=t.desc,s.singleChoiceQuestion.options=s.deepCopy(t.options);break;case"bf":var n=document.getElementById("bf-desc"),i=document.getElementById("bf-answer");n.value=t.desc,i.value=t.answer;break;default:break}})}}},z=Y,H=(s("58e1"),Object(c["a"])(z,m,f,!1,null,"3c1503e1",null));H.options.__file="questions.vue";var G=H.exports,V=s("bd82"),K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-1 flex-column justify-center"},[t.success?s("div",{staticClass:"flex-column flex-item-center"},[s("p",[t._v("发布成功")]),t._m(0)]):s("div",{staticClass:"flex-item-center"},[s("button",{staticClass:"pure-button",on:{click:function(e){t.next(-1)}}},[t._v("Back\n    ")]),s("button",{staticClass:"margin-left-1 pure-button pure-button-primary",on:{click:t.togglePreview}},[t._v("Preview")]),s("button",{staticClass:"margin-left-1 pure-button button-success",on:{click:t.publish}},[t._v("Publishs")])]),t.preview?s("preview",{attrs:{test:t.paper},on:{close:function(e){t.preview=!1}}}):t._e()],1)},X=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[s("a",{attrs:{href:"/"}},[t._v("前往查看")])])}],W=s("bc3a"),Z=s.n(W),tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"preview-wrapper",on:{click:t.close}},[s("div",{staticClass:"preview-container",on:{click:function(t){return t.stopPropagation(),function(){return!1}()}}},[s("header",[s("h1",[t._v(t._s(t.test.title))]),s("small",[t._v(t._s(t.test.author))]),s("p",[t._v(t._s(t.test.intro))])]),s("section",[s("ul",t._l(t.test.questions,function(e,n){return s("li",{key:e.desc},[s("p",[t._v(t._s(n+1+". "+e.desc))]),"sc"===e.type?s("div",[s("ul",t._l(e.options,function(e,n){return s("li",{key:n},[s("div",{staticClass:"flex-row",staticStyle:{width:"80%","padding-left":"1em"}},[s("span",{staticClass:"flex-1"},[t._v(t._s(e.desc))]),s("input",{attrs:{type:"radio",name:"question.desc",disabled:""}})])])}))]):"bf"===e.type?s("div",[s("br"),s("br"),s("br")]):t._e()])}))]),s("footer")])])},et=[],st={props:{test:{type:Object,required:!0}},methods:{close:function(){this.$emit("close")},next:function(){this.$emit("next",{type:"questions"})},publish:function(){this.$axios.post(this.$url.tests,this.paper)}}},nt=st,it=(s("99a1"),Object(c["a"])(nt,tt,et,!1,null,"fa14c5d0",null));it.options.__file="preview.vue";var at=it.exports,ot={components:{Preview:at},data:function(){return{paper:{},preview:!1,success:!1}},mounted:function(){var t=JSON.parse(localStorage.getItem("generals")),e=JSON.parse(localStorage.getItem("questions")),s=JSON.parse(localStorage.getItem("settings")),n=JSON.parse(localStorage.getItem("user"));this.paper={title:t.title,intro:t.intro,tags:t.tags,category:t.category,author:n.username,totalScore:e.reduce(function(t,e){return t+ +e.score},0),questions:e,settings:s}},methods:{togglePreview:function(){this.preview=!this.preview},next:function(t){this.$emit("next",t)},publish:function(){var t=this;Z.a.post(this.$url.tests,this.paper).then(function(){t.success=!0}).catch(function(){})}}},rt=ot,lt=(s("06f4"),Object(c["a"])(rt,K,X,!1,null,"2a08464a",null));lt.options.__file="publish.vue";var ct=lt.exports,ut={components:{Generals:d,Questions:G,Settings:V["a"],Publish:ct},data:function(){return{active:0,tabs:["generals","questions","settings","publish"],status:[!1,!1,!1],counter:0}},methods:{toClickTab:function(t){t!==this.tabs.length-1||this.counter===this.status.length?this.active=t:this.$alert("error","you have unsaved forms.")},jumpTo:function(t){1===t&&(this.status[this.active]||(this.counter+=1),this.$set(this.status,this.active,!0)),this.active+t!==this.tabs.length-1||this.counter===this.status.length?this.active+=t:this.$alert("error","you have unsaved forms.")}}},dt=ut,mt=(s("a661"),Object(c["a"])(dt,n,i,!1,null,"6cf1d07a",null));mt.options.__file="index.vue";e["default"]=mt.exports},fd9a:function(t,e,s){}}]);
//# sourceMappingURL=polygon.099d00e7.js.map